{"remainingRequest":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\src\\views\\Etudiant\\EspaceAdministratif\\DemandeConge.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\src\\views\\Etudiant\\EspaceAdministratif\\DemandeConge.vue","mtime":1634637102823},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBjb25nZUFwaSB9IGZyb20gIkAvX2FwaS9jb25nZS5hcGkuanMiOw0KaW1wb3J0IHsgZmlsZUFwaSB9IGZyb20gIkAvX2FwaS9maWxlLmFwaS5qcyI7DQppbXBvcnQgQm9keVRpdGxlIGZyb20gIkAvY29tcG9uZW50cy91dGlscy9Cb2R5VGl0bGUudnVlIjsNCmltcG9ydCBUYWJsZVRlbXBsYXRlIGZyb20gIkAvY29tcG9uZW50cy91dGlscy9UYWJsZVRlbXBsYXRlLnZ1ZSI7DQppbXBvcnQgeyBsZWF2ZUZpZWxkcyB9IGZyb20gIkAvYXNzZXRzL2pzL2ZpZWxkcy5qcyI7DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJEZW1hbmRlQ29uZ2UiLA0KICBjb21wb25lbnRzOiB7DQogICAgQm9keVRpdGxlLA0KICAgIFRhYmxlVGVtcGxhdGUsDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGZpbGU6ICIiLA0KICAgICAgZm9ybTogew0KICAgICAgICBkYXRlRGVidXQ6ICIiLA0KICAgICAgICBkYXRlRmluOiAiIiwNCiAgICAgICAgbW90aWY6ICIiLA0KICAgICAgICB0eXBlOiAiIiwNCiAgICAgICAgc3RhdHVzOiAiRU5fQVRURU5URSIsDQogICAgICAgIHV0aWxpc2F0ZXVyRHRvOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFV0aWxpc2F0ZXVyLA0KICAgICAgICBqdXN0aWZpY2F0aWY6ICIiLA0KICAgICAgfSwNCg0KICAgICAgdHlwZXM6IFsNCiAgICAgICAgeyB0ZXh0OiAiTWFsYWRpZSIsIHZhbHVlOiAiTUFMQURJRSIgfSwNCiAgICAgICAgeyB0ZXh0OiAiUGF5w6kiLCB2YWx1ZTogIlBBWUUiIH0sDQogICAgICAgIHsgdGV4dDogIlNhbnMgc29sZGUiLCB2YWx1ZTogIlNBTlNfU09MREUiIH0sDQogICAgICBdLA0KDQogICAgICBjb25nZXM6IFtdLA0KICAgICAgZmllbGRzOiBsZWF2ZUZpZWxkcywNCiAgICAgIHBlclBhZ2U6IDEwLA0KDQogICAgICB0YWJsZUNvbmdlOiBbXSwNCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgIHV0aWxpc2F0ZXVyKCkgew0KICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0VXRpbGlzYXRldXI7DQogICAgfSwNCiAgICBjb25nZXNDb21wdXRlZCgpIHsNCiAgICAgIHJldHVybiB0aGlzLmNvbmdlczsNCiAgICB9LA0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIGNvbmdlQXBpDQogICAgICAuZ2V0Q29uZ2VzQnlVdGlsaXNhdGV1cklkKHRoaXMudXRpbGlzYXRldXIuaWQpDQogICAgICAudGhlbigocmVzcG9uc2UpID0+ICh0aGlzLmNvbmdlcyA9IHJlc3BvbnNlKSk7DQogICAgY29uZ2VBcGkNCiAgICAgIC5nZXRUYWJsZUNvbmdlKHRoaXMudXRpbGlzYXRldXIuaWQpDQogICAgICAudGhlbigocmVzcG9uc2UpID0+ICh0aGlzLnRhYmxlQ29uZ2UgPSByZXNwb25zZSkpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaGFuZGxlRmlsZVVwbG9hZCgpIHsNCiAgICAgIHRoaXMuZmlsZSA9IHRoaXMuJHJlZnMuZmlsZS5maWxlc1swXTsNCiAgICB9LA0KICAgIHN1Ym1pdChlKSB7DQogICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQoNCiAgICAgIHRoaXMuZm9ybS5qdXN0aWZpY2F0aWYgPSB0aGlzLmZpbGUubmFtZTsNCg0KICAgICAgLy9UT0RPIDogc2F2ZSBkdSBmaWxlDQoNCiAgICAgIGNvbmdlQXBpDQogICAgICAgIC5zYXZlKHRoaXMuZm9ybSkNCiAgICAgICAgLy9RdWFuZCBvbiBhIGFqb3V0w6kgbGUgY29uZ8OpLCBvbiByZWNoYXJnZSBsYSBsaXN0ZQ0KICAgICAgICAudGhlbigoKSA9Pg0KICAgICAgICAgIGNvbmdlQXBpDQogICAgICAgICAgICAuZ2V0Q29uZ2VzQnlVdGlsaXNhdGV1cklkKHRoaXMudXRpbGlzYXRldXIuaWQpDQogICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+ICh0aGlzLmNvbmdlcyA9IHJlc3BvbnNlKSkNCiAgICAgICAgICAgIC8vU2kgcGFzIGQnZXJyZXVyLCBvbiBwb3N0IGxlIGZpY2hpZXINCiAgICAgICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgaWYodGhpcy5maWxlICE9ICIiKQ0KICAgICAgICAgICAgICAgIGZpbGVBcGkNCiAgICAgICAgICAgICAgICAgIC5zdWJtaXRGaWxlQnlEaXJlY3RvcnlBbmRJZCgNCiAgICAgICAgICAgICAgICAgICAgInV0aWxpc2F0ZXVycyIsDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0VXRpbGlzYXRldXIuaWQsDQogICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsZQ0KICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIH0pDQogICAgICAgICk7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["DemandeConge.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DemandeConge.vue","sourceRoot":"src/views/Etudiant/EspaceAdministratif","sourcesContent":["<template>\r\n  <div class=\"container-fluid\">\r\n    <BodyTitle title=\"Demande de congé\" />\r\n    \r\n    <table class=\"table text-center mt-5\" style=\"table-layout:fixed\">\r\n      <thead>\r\n        <tr>\r\n          <th>Acquis</th>\r\n          <th>Pris</th>\r\n          <th>Disponibles</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <td>{{ tableConge[0] | twoDigits }}</td>\r\n        <td>{{ tableConge[1] | twoDigits }}</td>\r\n        <td>{{ tableConge[2] | twoDigits }}</td>\r\n      </tbody>\r\n    </table>\r\n    <b-form class=\"form mb-5\" @submit=\"submit\">\r\n      <b-form-group>\r\n        <b-form-row class=\"text-align-left\">\r\n          <label class=\"offset-1 col-1\">Date de début</label>\r\n          <div class=\"col-4 pr-5\">\r\n            <b-form-datepicker\r\n              locale=\"fr\"\r\n              v-model=\"form.dateDebut\"\r\n              required\r\n            ></b-form-datepicker>\r\n          </div>\r\n          <div class=\"col-1\">Date de fin</div>\r\n          <div class=\"col-4 pr-5\">\r\n            <b-form-datepicker\r\n              locale=\"fr\"\r\n              v-model=\"form.dateFin\"\r\n              required\r\n            ></b-form-datepicker>\r\n          </div>\r\n        </b-form-row>\r\n      </b-form-group>\r\n\r\n      <b-form-group>\r\n        <b-form-row class=\"text-align-left\">\r\n          <div class=\"offset-1 col-1\">Motif</div>\r\n          <div class=\"col-4 pr-5\">\r\n            <b-form-textarea type=\"text\" v-model=\"form.motif\" class=\"my-textarea\">\r\n            </b-form-textarea>\r\n          </div>\r\n          <label class=\"col-1\">Type de congé</label>\r\n          <div class=\"col-4 pr-5\">\r\n            <b-form-select\r\n              :options=\"types\"\r\n              v-model=\"form.type\"\r\n              required\r\n            ></b-form-select>\r\n          </div>\r\n        </b-form-row>\r\n      </b-form-group>\r\n\r\n      <b-form-group>\r\n        <b-form-row class=\"text-align-left\">\r\n          <div class=\"offset-1 col-1\">Justificatif</div>\r\n          <input\r\n            type=\"file\"\r\n            id=\"file\"\r\n            ref=\"file\"\r\n            v-on:change=\"handleFileUpload()\"\r\n            accept=\"application/pdf\"\r\n          />\r\n\r\n          <b-button type=\"submit\" class=\"offset-9 col-2 pl-5 pr-5 pl-0\"\r\n            >Send</b-button\r\n          >\r\n        </b-form-row>\r\n      </b-form-group>\r\n\r\n      <!-- <div class=\"offset-9 col-2 pl-5 pr-5 pl-0\">\r\n        <b-button type=\"submit\" class=\"col-2 pl-5 pr-5 pl-0\">Send</b-button>\r\n      </div> -->\r\n    </b-form>\r\n\r\n    <TableTemplate\r\n      :perPage=\"perPage\"\r\n      :items=\"congesComputed\"\r\n      :fields=\"fields\"\r\n      :isPaginate=\"false\"\r\n      class=\"table-template\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { congeApi } from \"@/_api/conge.api.js\";\r\nimport { fileApi } from \"@/_api/file.api.js\";\r\nimport BodyTitle from \"@/components/utils/BodyTitle.vue\";\r\nimport TableTemplate from \"@/components/utils/TableTemplate.vue\";\r\nimport { leaveFields } from \"@/assets/js/fields.js\";\r\nexport default {\r\n  name: \"DemandeConge\",\r\n  components: {\r\n    BodyTitle,\r\n    TableTemplate,\r\n  },\r\n  data() {\r\n    return {\r\n      file: \"\",\r\n      form: {\r\n        dateDebut: \"\",\r\n        dateFin: \"\",\r\n        motif: \"\",\r\n        type: \"\",\r\n        status: \"EN_ATTENTE\",\r\n        utilisateurDto: this.$store.getters.getUtilisateur,\r\n        justificatif: \"\",\r\n      },\r\n\r\n      types: [\r\n        { text: \"Maladie\", value: \"MALADIE\" },\r\n        { text: \"Payé\", value: \"PAYE\" },\r\n        { text: \"Sans solde\", value: \"SANS_SOLDE\" },\r\n      ],\r\n\r\n      conges: [],\r\n      fields: leaveFields,\r\n      perPage: 10,\r\n\r\n      tableConge: [],\r\n    };\r\n  },\r\n  computed: {\r\n    utilisateur() {\r\n      return this.$store.getters.getUtilisateur;\r\n    },\r\n    congesComputed() {\r\n      return this.conges;\r\n    },\r\n  },\r\n  created() {\r\n    congeApi\r\n      .getCongesByUtilisateurId(this.utilisateur.id)\r\n      .then((response) => (this.conges = response));\r\n    congeApi\r\n      .getTableConge(this.utilisateur.id)\r\n      .then((response) => (this.tableConge = response));\r\n  },\r\n  methods: {\r\n    handleFileUpload() {\r\n      this.file = this.$refs.file.files[0];\r\n    },\r\n    submit(e) {\r\n      e.preventDefault();\r\n\r\n      this.form.justificatif = this.file.name;\r\n\r\n      //TODO : save du file\r\n\r\n      congeApi\r\n        .save(this.form)\r\n        //Quand on a ajouté le congé, on recharge la liste\r\n        .then(() =>\r\n          congeApi\r\n            .getCongesByUtilisateurId(this.utilisateur.id)\r\n            .then((response) => (this.conges = response))\r\n            //Si pas d'erreur, on post le fichier\r\n            .then(() => {\r\n              if(this.file != \"\")\r\n                fileApi\r\n                  .submitFileByDirectoryAndId(\r\n                    \"utilisateurs\",\r\n                    this.$store.getters.getUtilisateur.id,\r\n                    this.file\r\n                  );\r\n            })\r\n        );\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.form {\r\n  margin-top: 5em;\r\n}\r\n\r\n.b-form-textarea {\r\n  height: 200px;\r\n}\r\n\r\n.btn {\r\n  width: 100%;\r\n}\r\n\r\n.table-template {\r\n  margin-right: 4em;\r\n}\r\n\r\n.my-textarea{\r\n  height: 150px;\r\n}\r\n</style>\r\n"]}]}