{"remainingRequest":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\src\\views\\Etudiant\\EspaceAdministratif\\DemandeConge.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\src\\views\\Etudiant\\EspaceAdministratif\\DemandeConge.vue","mtime":1634717084760},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7ICBjb25nZUFwaSB9IGZyb20gIkAvX2FwaS9jb25nZS5hcGkuanMiOwppbXBvcnQgeyBmaWxlQXBpIH0gZnJvbSAiQC9fYXBpL2ZpbGUuYXBpLmpzIjsKaW1wb3J0IEJvZHlUaXRsZSBmcm9tICJAL2NvbXBvbmVudHMvdXRpbHMvQm9keVRpdGxlLnZ1ZSI7CmltcG9ydCBUYWJsZVRlbXBsYXRlIGZyb20gIkAvY29tcG9uZW50cy91dGlscy9UYWJsZVRlbXBsYXRlLnZ1ZSI7CmltcG9ydCB7IGxlYXZlRmllbGRzIH0gZnJvbSAiQC9hc3NldHMvanMvZmllbGRzLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJEZW1hbmRlQ29uZ2UiLAogIGNvbXBvbmVudHM6IHsKICAgIEJvZHlUaXRsZSwKICAgIFRhYmxlVGVtcGxhdGUsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZmlsZTogIiIsCiAgICAgIGZvcm06IHsKICAgICAgICBkYXRlRGVidXQ6ICIiLAogICAgICAgIGRhdGVGaW46ICIiLAogICAgICAgIG1vdGlmOiAiIiwKICAgICAgICB0eXBlOiAiIiwKICAgICAgICBzdGF0dXM6ICJFTl9BVFRFTlRFIiwKICAgICAgICB1dGlsaXNhdGV1ckR0bzogdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRVdGlsaXNhdGV1ciwKICAgICAgICBqdXN0aWZpY2F0aWY6ICIiLAogICAgICB9LAoKICAgICAgdHlwZXM6IFt7CiAgICAgICAgICB0ZXh0OiAiTWFsYWRpZSIsCiAgICAgICAgICB2YWx1ZTogIk1BTEFESUUiCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0ZXh0OiAiUGF5w6kiLAogICAgICAgICAgdmFsdWU6ICJQQVlFIgogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogIlNhbnMgc29sZGUiLAogICAgICAgICAgdmFsdWU6ICJTQU5TX1NPTERFIgogICAgICAgIH0sCiAgICAgIF0sCgogICAgICBjb25nZXM6IFtdLAogICAgICBmaWVsZHM6IGxlYXZlRmllbGRzLAogICAgICBwZXJQYWdlOiAxMCwKCiAgICAgIHRhYmxlQ29uZ2U6IFtdLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICB1dGlsaXNhdGV1cigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0VXRpbGlzYXRldXI7CiAgICB9LAogICAgY29uZ2VzQ29tcHV0ZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbmdlczsKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgY29uZ2VBcGkKICAgICAgLmdldENvbmdlc0J5VXRpbGlzYXRldXJJZCh0aGlzLnV0aWxpc2F0ZXVyLmlkKQogICAgICAudGhlbigocmVzcG9uc2UpID0+ICh0aGlzLmNvbmdlcyA9IHJlc3BvbnNlKSk7CiAgICBjb25nZUFwaQogICAgICAuZ2V0VGFibGVDb25nZSh0aGlzLnV0aWxpc2F0ZXVyLmlkKQogICAgICAudGhlbigocmVzcG9uc2UpID0+ICh0aGlzLnRhYmxlQ29uZ2UgPSByZXNwb25zZSkpOwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlRmlsZVVwbG9hZCgpIHsKICAgICAgdGhpcy5maWxlID0gdGhpcy4kcmVmcy5maWxlLmZpbGVzWzBdOwogICAgfSwKICAgIHN1Ym1pdChlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKCiAgICAgIHRoaXMuZm9ybS5qdXN0aWZpY2F0aWYgPSB0aGlzLmZpbGUubmFtZTsKCiAgICAgIC8vVE9ETyA6IHNhdmUgZHUgZmlsZQoKICAgICAgY29uZ2VBcGkKICAgICAgICAuc2F2ZSh0aGlzLmZvcm0pCiAgICAgICAgLy9RdWFuZCBvbiBhIGFqb3V0w6kgbGUgY29uZ8OpLCBvbiByZWNoYXJnZSBsYSBsaXN0ZQogICAgICAgIC50aGVuKCgpID0+CiAgICAgICAgICBjb25nZUFwaQogICAgICAgICAgLmdldENvbmdlc0J5VXRpbGlzYXRldXJJZCh0aGlzLnV0aWxpc2F0ZXVyLmlkKQogICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiAodGhpcy5jb25nZXMgPSByZXNwb25zZSkpCiAgICAgICAgICAvL1NpIHBhcyBkJ2VycmV1ciwgb24gcG9zdCBsZSBmaWNoaWVyCiAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgIGlmICh0aGlzLmZpbGUgIT0gIiIpCiAgICAgICAgICAgICAgZmlsZUFwaS5zdWJtaXRGaWxlQnlEaXJlY3RvcnlBbmRJZCgKICAgICAgICAgICAgICAgICJ1dGlsaXNhdGV1cnMiLAogICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRVdGlsaXNhdGV1ci5pZCwKICAgICAgICAgICAgICAgIHRoaXMuZmlsZQogICAgICAgICAgICAgICk7CiAgICAgICAgICB9KQogICAgICAgICk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["DemandeConge.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DemandeConge.vue","sourceRoot":"src/views/Etudiant/EspaceAdministratif","sourcesContent":["<template>\r\n  <div class=\"container-fluid\">\r\n    <BodyTitle title=\"Demande de congé\" />\r\n\r\n    <table class=\"table text-center mt-5\" style=\"table-layout:fixed\">\r\n      <thead>\r\n        <tr>\r\n          <th>Acquis</th>\r\n          <th>Pris</th>\r\n          <th>Disponibles</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <td>{{ tableConge[0] | twoDigits }}</td>\r\n        <td>{{ tableConge[1] | twoDigits }}</td>\r\n        <td>{{ tableConge[2] | twoDigits }}</td>\r\n      </tbody>\r\n    </table>\r\n\r\n    <form class=\"mb-5\" @submit=\"submit\">\r\n      <div class=\"d-flex justify-content-center form-group\">\r\n        <div class=\"col-4\">\r\n          <label for=\"\">Date de debut</label>\r\n          <b-form-datepicker locale=\"fr\" v-model=\"form.dateDebut\" placeholder=\"Aucune date selectionné\" required>\r\n          </b-form-datepicker>\r\n        </div>\r\n        <div class=\"col-4\">\r\n          <label for=\"\">Date de fin</label>\r\n          <b-form-datepicker locale=\"fr\" v-model=\"form.dateFin\" placeholder=\"Aucune date selectionné\" required>\r\n          </b-form-datepicker>\r\n        </div>\r\n      </div>\r\n      <div class=\"d-flex justify-content-center form-group\">\r\n        <div class=\"col-4\">\r\n          <select name=\"\" id=\"\" class=\"custom-select\" v-model=\"form.type\">\r\n            <option value=\"\" disabled>Type de congé</option>\r\n            <option :value=\"type.value\" v-for=\"type in types\" :key=\"type.id\">\r\n              {{ type.text }}\r\n            </option>\r\n          </select>\r\n        </div>\r\n        <div class=\"col-4\">\r\n          <label for=\"file\" class=\"mr-2\">Justificatif :</label>\r\n          <input\r\n            type=\"file\"\r\n            id=\"file\"\r\n            ref=\"file\"\r\n            v-on:change=\"handleFileUpload()\"\r\n            accept=\"application/pdf\"\r\n          />\r\n   \r\n          </div>\r\n      </div>\r\n      \r\n      <div class=\"d-flex justify-content-center form-group\">\r\n        <div class=\"col-8\">\r\n        <textarea name=\"motif\" cols=\"20\" rows=\"3\" class=\"form-control\" v-model=\"form.motif\" placeholder=\"Motif du congé\"/>\r\n        </div>\r\n      </div>\r\n      <input type=\"submit\" value=\"Envoyer\" class=\"btn btn-outline-primary px-5 float-right\">\r\n    </form>\r\n    <!-- {{conges}} -->\r\n    <!-- <pre class=\"m-0\">\r\n      {{form}}\r\n    </pre> -->\r\n    <TableTemplate :perPage=\"perPage\" :items=\"congesComputed\" :fields=\"fields\" :isPaginate=\"false\" :current-page=\"0\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {  congeApi } from \"@/_api/conge.api.js\";\r\n  import { fileApi } from \"@/_api/file.api.js\";\r\n  import BodyTitle from \"@/components/utils/BodyTitle.vue\";\r\n  import TableTemplate from \"@/components/utils/TableTemplate.vue\";\r\n  import { leaveFields } from \"@/assets/js/fields.js\";\r\n  export default {\r\n    name: \"DemandeConge\",\r\n    components: {\r\n      BodyTitle,\r\n      TableTemplate,\r\n    },\r\n    data() {\r\n      return {\r\n        file: \"\",\r\n        form: {\r\n          dateDebut: \"\",\r\n          dateFin: \"\",\r\n          motif: \"\",\r\n          type: \"\",\r\n          status: \"EN_ATTENTE\",\r\n          utilisateurDto: this.$store.getters.getUtilisateur,\r\n          justificatif: \"\",\r\n        },\r\n\r\n        types: [{\r\n            text: \"Maladie\",\r\n            value: \"MALADIE\"\r\n          },\r\n          {\r\n            text: \"Payé\",\r\n            value: \"PAYE\"\r\n          },\r\n          {\r\n            text: \"Sans solde\",\r\n            value: \"SANS_SOLDE\"\r\n          },\r\n        ],\r\n\r\n        conges: [],\r\n        fields: leaveFields,\r\n        perPage: 10,\r\n\r\n        tableConge: [],\r\n      };\r\n    },\r\n    computed: {\r\n      utilisateur() {\r\n        return this.$store.getters.getUtilisateur;\r\n      },\r\n      congesComputed() {\r\n        return this.conges;\r\n      },\r\n    },\r\n    created() {\r\n      congeApi\r\n        .getCongesByUtilisateurId(this.utilisateur.id)\r\n        .then((response) => (this.conges = response));\r\n      congeApi\r\n        .getTableConge(this.utilisateur.id)\r\n        .then((response) => (this.tableConge = response));\r\n    },\r\n    methods: {\r\n      handleFileUpload() {\r\n        this.file = this.$refs.file.files[0];\r\n      },\r\n      submit(e) {\r\n        e.preventDefault();\r\n\r\n        this.form.justificatif = this.file.name;\r\n\r\n        //TODO : save du file\r\n\r\n        congeApi\r\n          .save(this.form)\r\n          //Quand on a ajouté le congé, on recharge la liste\r\n          .then(() =>\r\n            congeApi\r\n            .getCongesByUtilisateurId(this.utilisateur.id)\r\n            .then((response) => (this.conges = response))\r\n            //Si pas d'erreur, on post le fichier\r\n            .then(() => {\r\n              if (this.file != \"\")\r\n                fileApi.submitFileByDirectoryAndId(\r\n                  \"utilisateurs\",\r\n                  this.$store.getters.getUtilisateur.id,\r\n                  this.file\r\n                );\r\n            })\r\n          );\r\n      },\r\n    },\r\n  };\r\n</script>\r\n"]}]}