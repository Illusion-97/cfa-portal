{"remainingRequest":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\src\\views\\Etudiant\\EspacePedagogique\\DossierProjet.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\src\\views\\Etudiant\\EspacePedagogique\\DossierProjet.vue","mtime":1634717085154},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1634732405246},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\babel-loader\\lib\\index.js","mtime":1634732404052},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1634732405246},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\vue-loader\\lib\\index.js","mtime":1634732415295}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQm9keVRpdGxlIGZyb20gIkAvY29tcG9uZW50cy91dGlscy9Cb2R5VGl0bGUudnVlIjsNCmltcG9ydCB7ZG9zc2llclByb2pldEFwaX0gZnJvbSAiQC9fYXBpL2Rvc3NpZXJQcm9qZXQuYXBpLmpzIjsNCmltcG9ydCB7IGZpbGVBcGkgfSBmcm9tICJAL19hcGkvZmlsZS5hcGkuanMiDQppbXBvcnQge3Byb2pldEFwaX0gZnJvbSAiQC9fYXBpL3Byb2pldC5hcGkuanMiDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkRvc3NpZXJQcm8iLA0KICBjb21wb25lbnRzOiB7DQogICAgQm9keVRpdGxlDQogIH0sIGRhdGEoKXsNCiAgICByZXR1cm57DQoNCiAgICAgIGZpbGVzOiBbXSwNCiAgICAgIGZpbGVUb1NhdmUgOiAiIiwNCiAgICAgIGZpbGU6ICIiLA0KICAgICAgcHJvamV0czogW10sDQogICAgICBzZWxlY3RlZDogbnVsbCwNCiAgICAgIGZvcm06ew0KICAgICAgICBub20gOiAiIiwNCiAgICAgICAgcHJvamV0RHRvIDpudWxsDQogICAgICB9DQogICAgfQ0KICB9LA0KIGNyZWF0ZWQoKXsNCiAgICB0aGlzLnJlZnJlc2hMaXN0KCk7DQogICB9LA0KICAgY29tcHV0ZWQ6IHsNCiAgICB1dGlsaXNhdGV1cigpIHsNCiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFV0aWxpc2F0ZXVyOw0KICAgICAgfSwNCiAgICBmaWxlc19jb21wdXRlZCgpew0KICAgICAgcmV0dXJuIHRoaXMuZmlsZXM7DQogICAgfSwNCiAgICBwcm9qZXRzX2NvbXB1dGVkKCl7DQogICAgICByZXR1cm4gdGhpcy5wcm9qZXRzDQogICAgfQ0KICB9LA0KICBtZXRob2RzOnsNCiAgICBvblNlbGVjdGVkKCkgew0KICAgICAgdGhpcy5mb3JtLnByb2pldER0byA9IHRoaXMuc2VsZWN0ZWQ7DQogICAgfSwNCiAgICAgIGhhbmRsZUZpbGVVcGxvYWQoKSB7DQogICAgICB0aGlzLmZpbGVUb1NhdmUgPSB0aGlzLiRyZWZzLmZpbGUuZmlsZXNbMF07DQogICAgfSwNCiAgICBzdWJtaXRGaWxlKCkgeyAgICANCiAgICAgIHRoaXMuZm9ybS5ub20gPSB0aGlzLmZpbGVUb1NhdmUubmFtZTsNCiAgICAgIGZpbGVBcGkuc3VibWl0RmlsZUJ5RGlyZWN0b3J5QW5kSWRBbmREaXJlY3RvcnkoInV0aWxpc2F0ZXVycyIsIHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0VXRpbGlzYXRldXIuaWQsIkRvc3NpZXJQcm9qZXQiLCB0aGlzLmZpbGVUb1NhdmUpOw0KICAgICAgZG9zc2llclByb2pldEFwaS5zYXZlKHRoaXMuZm9ybSx0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFV0aWxpc2F0ZXVyLmlkKS50aGVuKCgpPT50aGlzLnJlZnJlc2hMaXN0KCkpDQogICAgICANCiAgICB9LA0KICAgIGRvd25sb2FkX2ZpbGUoZmlsZU5hbWUpIHsNCiAgICAgIGZpbGVBcGkuZG93bmxvYWRCeURpcmVjdG9yeUFuZElkQW5kRGlyZWN0b3J5QW5kRmlsZW5hbWUoInV0aWxpc2F0ZXVycyIsIHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0VXRpbGlzYXRldXIuaWQsICJEb3NzaWVyUHJvamV0IixmaWxlTmFtZSk7DQogICAgICANCiAgICB9LA0KICAgIGRlbGV0ZV9maWxlKGZpbGUpIHsNCiAgICAgIGRvc3NpZXJQcm9qZXRBcGkuZGVsZXRlRG9zc2llclByb2pldChmaWxlLmlkLHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0VXRpbGlzYXRldXIuaWQpLnRoZW4oKCk9PnRoaXMucmVmcmVzaExpc3QoKSk7DQogICAgICBmaWxlQXBpLmRlbGV0ZUJ5RGlyZWN0b3J5QW5kSWRBbmREaXJlY3RvcnlBbmRGaWxlbmFtZSgidXRpbGlzYXRldXJzIiwgdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRVdGlsaXNhdGV1ci5pZCwiRG9zc2llclByb2pldCIsIGZpbGUubm9tKTsNCiAgICAgIA0KICAgIH0sDQogICAgcmVmcmVzaExpc3QoKXsNCiAgICBkb3NzaWVyUHJvamV0QXBpLmdldEJ5SWRFdHVkaWFudCh0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFV0aWxpc2F0ZXVyLmlkKS50aGVuKHJlc3BvbnNlID0+IHRoaXMuZmlsZXMgPSByZXNwb25zZSkNCiAgICBwcm9qZXRBcGkuZ2V0QnlJZEV0dWRpYW50KHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0VXRpbGlzYXRldXIuaWQpLnRoZW4ocmVzcG9uc2UgPT4gdGhpcy5wcm9qZXRzPSByZXNwb25zZSkNCiAgDQogICAgfQ0KICB9DQp9DQoNCg=="},{"version":3,"sources":["DossierProjet.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"DossierProjet.vue","sourceRoot":"src/views/Etudiant/EspacePedagogique","sourcesContent":["<template>\r\n    <div >\r\n      <div class=\"monBody\">\r\n        <router-view />\r\n      </div>\r\n      <div class=\"body\">\r\n        <BodyTitle title=\"Mon dossier projet\" />\r\n        <br>\r\n        <div class=\"\">\r\n          <input\r\n            type=\"file\"\r\n            id=\"file\"\r\n            ref=\"file\"\r\n            v-on:change=\"handleFileUpload()\"\r\n            class=\"mr-3\"\r\n            accept=\"application/pdf\"\r\n          />\r\n          <button v-on:click=\"submitFile()\" class=\"btn btn-primary\">Ajouter</button>\r\n        </div>\r\n        <br>\r\n        <div class=\"mon-group\">\r\n            <label class=\"form-label\"\r\n              >Selectionner un projet pour le dossier Projet :\r\n            </label>\r\n            <select\r\n              class=\"custom-select\"\r\n              v-model=\"selected\"\r\n              @change=\"onSelected()\"\r\n            >\r\n              <option\r\n                v-for=\"projet in projets_computed\"\r\n                :key=\"projet.id\"\r\n                :value=\"projet\"\r\n                >{{ projet.nom }}</option\r\n              >\r\n            </select>\r\n        </div>\r\n\r\n       <br>\r\n       <table class=\"table table-striped table-hover text-center\">\r\n          <thead>\r\n            <tr>\r\n              <th>Nom du fichier</th>\r\n              <th>Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody v-if=\"files_computed\">\r\n            <tr v-for=\"file in files_computed\" \r\n                :key=\"file.id\"\r\n                >\r\n              <td>\r\n                {{file.nom}}\r\n              </td>\r\n              <td>\r\n                <button v-on:click=\"download_file(file.nom)\">Télécharger</button>\r\n                <button v-on:click=\"delete_file(file)\">Supprimer</button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n\r\n    </div>\r\n    </div>\r\n    \r\n\r\n</template>\r\n<script>\r\nimport BodyTitle from \"@/components/utils/BodyTitle.vue\";\r\nimport {dossierProjetApi} from \"@/_api/dossierProjet.api.js\";\r\nimport { fileApi } from \"@/_api/file.api.js\"\r\nimport {projetApi} from \"@/_api/projet.api.js\"\r\n\r\nexport default {\r\n  name: \"DossierPro\",\r\n  components: {\r\n    BodyTitle\r\n  }, data(){\r\n    return{\r\n\r\n      files: [],\r\n      fileToSave : \"\",\r\n      file: \"\",\r\n      projets: [],\r\n      selected: null,\r\n      form:{\r\n        nom : \"\",\r\n        projetDto :null\r\n      }\r\n    }\r\n  },\r\n created(){\r\n    this.refreshList();\r\n   },\r\n   computed: {\r\n    utilisateur() {\r\n      return this.$store.getters.getUtilisateur;\r\n      },\r\n    files_computed(){\r\n      return this.files;\r\n    },\r\n    projets_computed(){\r\n      return this.projets\r\n    }\r\n  },\r\n  methods:{\r\n    onSelected() {\r\n      this.form.projetDto = this.selected;\r\n    },\r\n      handleFileUpload() {\r\n      this.fileToSave = this.$refs.file.files[0];\r\n    },\r\n    submitFile() {    \r\n      this.form.nom = this.fileToSave.name;\r\n      fileApi.submitFileByDirectoryAndIdAndDirectory(\"utilisateurs\", this.$store.getters.getUtilisateur.id,\"DossierProjet\", this.fileToSave);\r\n      dossierProjetApi.save(this.form,this.$store.getters.getUtilisateur.id).then(()=>this.refreshList())\r\n      \r\n    },\r\n    download_file(fileName) {\r\n      fileApi.downloadByDirectoryAndIdAndDirectoryAndFilename(\"utilisateurs\", this.$store.getters.getUtilisateur.id, \"DossierProjet\",fileName);\r\n      \r\n    },\r\n    delete_file(file) {\r\n      dossierProjetApi.deleteDossierProjet(file.id,this.$store.getters.getUtilisateur.id).then(()=>this.refreshList());\r\n      fileApi.deleteByDirectoryAndIdAndDirectoryAndFilename(\"utilisateurs\", this.$store.getters.getUtilisateur.id,\"DossierProjet\", file.nom);\r\n      \r\n    },\r\n    refreshList(){\r\n    dossierProjetApi.getByIdEtudiant(this.$store.getters.getUtilisateur.id).then(response => this.files = response)\r\n    projetApi.getByIdEtudiant(this.$store.getters.getUtilisateur.id).then(response => this.projets= response)\r\n  \r\n    }\r\n  }\r\n}\r\n\r\n</script>"]}]}