{"remainingRequest":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\src\\components\\Modal\\ModalPromo.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\src\\components\\Modal\\ModalPromo.vue","mtime":1634717085998},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHByb21vdGlvbkFwaSB9IGZyb20gIi4uLy4uL19hcGkvcHJvbW90aW9uLmFwaSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTW9kYWxQcm9tb3Rpb24iLAogIHByb3BzOiB7CiAgICBpZE5hbWU6IFN0cmluZywKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjdXJyZW50UGFnZTogMCwKICAgICAgcGVyUGFnZTogNSwKICAgICAga2V5d29yZDogIiIsCiAgICAgIHBhZ2VDb3VudDogMCwKICAgICAgaXRlbXM6IFtdLAogICAgICBwcm9tb3Rpb25zOiBbXSwKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5maWxsTGlzdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgZmlsbExpc3QoKSB7CiAgICAgIHByb21vdGlvbkFwaQogICAgICAgIC5nZXRBbGxCeVBhZ2UodGhpcy5jdXJyZW50UGFnZSwgdGhpcy5wZXJQYWdlLCB0aGlzLmtleXdvcmQpCiAgICAgICAgLnRoZW4oKGRhdGEpID0+IHRoaXMuaXRlbXMgPSBkYXRhKTsKICAgICAgdGhpcy5jb3VudCgpOwogICAgfSwKICAgIGNvdW50KCkgewogICAgICBwcm9tb3Rpb25BcGkKICAgICAgICAuZ2V0Q291bnQodGhpcy5rZXkpCiAgICAgICAgLnRoZW4oKGRhdGEpID0+ICh0aGlzLnBhZ2VDb3VudCA9IE1hdGguY2VpbChkYXRhIC8gdGhpcy5wZXJQYWdlKSkpOwogICAgfSwKICAgIHBhZ2VDaGFuZ2UocGFnZSkgewogICAgICBwcm9tb3Rpb25BcGkKICAgICAgICAuZ2V0QWxsQnlQYWdlKHBhZ2UsIHRoaXMucGVyUGFnZSwgdGhpcy5rZXkpCiAgICAgICAgLnRoZW4oKGRhdGEpID0+ICh0aGlzLml0ZW1zID0gZGF0YSkpOwogICAgfSwKICAgIHNlYXJjaChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHRoaXMuZmlsbExpc3QoKTsKICAgICAgdGhpcy5jb3VudCgpOwogICAgfSwKICAgIGFkZFByb21vKHByb21vKSB7CiAgICAgIC8vIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBpZiAodGhpcy5wcm9tb3Rpb25zLnNvbWUoZWwgPT4gZWwuaWQgPT0gcHJvbW8uaWQpKQogICAgICAgIHJldHVybiAnJwogICAgICB0aGlzLnByb21vdGlvbnMucHVzaChwcm9tbyk7CiAgICB9LAogICAgcmVtb3ZlUHJvbW8oaW5kZXgpIHsKICAgICAgdGhpcy5wcm9tb3Rpb25zLnNwbGljZShpbmRleCwgMSkKICAgIH0sCiAgICBvblJlc2V0KGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdGhpcy5wcm9tb3Rpb25zID0gW10KICAgIH0sCiAgICBzYXZlQ2hhbmdlKCkgewogICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHRoaXMucHJvbW90aW9ucyk7CiAgICAgIC8vIGNvbnNvbGUubG9nKCJtb2RhbCIsdGhpcy5wcm9tb3Rpb25zKTsKICAgICAgLy8gJCgiI21vZGFsIikubW9kYWwoJ2hpZGUnKTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBuYlBhZ2VDb21wdXRlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMucGFnZUNvdW50OwogICAgfSwKICAgIGtleTogewogICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5rZXl3b3JkOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIChrZXl3b3JkKSB7CiAgICAgICAgdGhpcy5rZXl3b3JkID0ga2V5d29yZDsKICAgICAgfSwKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["ModalPromo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ModalPromo.vue","sourceRoot":"src/components/Modal","sourcesContent":["<template>\r\n  <section>\r\n    <!-- Modal -->\r\n    <div class=\"modal fade custom-modal\" :id=\"idName\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\"\r\n      aria-hidden=\"true\">\r\n      <div class=\"modal-dialog modal-xl\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"exampleModalLabel\">Ajouter des promotions</h5>\r\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <div class=\"container-fluid\">\r\n              <div class=\"row-fluid\">\r\n                <form action=\"\" class=\"d-flex\" @submit=\"search\">\r\n                  <input type=\"search\" name=\"search\" id=\"searchCursus\" v-model=\"key\"\r\n                    class=\"form-control rounded-0 input-search\" placeholder=\"Rechercher...\" />\r\n                  <button type=\"submit\" class=\"btn radius px-4 btn-search\">\r\n                    <font-awesome-icon :icon=\"['fas', 'search']\" class=\"icon\" />\r\n                  </button>\r\n                </form>\r\n              </div>\r\n              <div class=\"row mt-3\">\r\n                <div class=\"col-md-6\">\r\n                  <small class=\"form-text info-text\">\r\n                    <font-awesome-icon :icon=\"['fas', 'info-circle']\" />\r\n                    Selectionnez une ou plusieurs promotions.</small>\r\n                  <table class=\"table text-center\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th scope=\"col\">Nom de la promotion</th>\r\n                        <!-- <th scope=\"col\">Formations</th> -->\r\n                        <!-- <th scope=\"col\">Handle</th> -->\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      <tr v-for=\"promo in items\" :key=\"promo.id\">\r\n                        <td @click.prevent=\"addPromo(promo)\">\r\n                          <span> {{ promo.nom }}</span>\r\n                        </td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n\r\n                  <paginate :page-count=\"nbPageComputed\" :page-range=\"1\" :margin-pages=\"2\" :click-handler=\"pageChange\"\r\n                    :prev-text=\"'Prev'\" :next-text=\"'Next'\" :container-class=\"'pagination d-flex justify-content-end'\"\r\n                    :page-class=\"'page-item'\" :page-link-class=\"'page-link'\" :prev-class=\"'page-item'\"\r\n                    :next-class=\"'page-item'\" :prev-link-class=\"'page-link'\" :next-link-class=\"'page-link'\"\r\n                    :active-class=\"'active'\">\r\n                    >\r\n                  </paginate>\r\n                </div>\r\n                <div class=\"col-md-6\">\r\n                  <div class=\"card h-100 p-2\">\r\n                    <div class=\"card-header\">\r\n                      <h6 class=\"text-center\">Promotions selectionn√©e</h6>\r\n                    </div>\r\n                    <div class=\"card-body\">\r\n                      <ul>\r\n                        <div class=\"alert alert-custom\" v-for=\"(p,index) in promotions\" :key=\"p.id\">\r\n                          <span class=\"close\" @click.prevent=\"removePromo(index)\">&times;</span>\r\n                            {{p.nom}}\r\n                        </div>\r\n                        <!-- <p class=\"alert alert-primary\">{{p.nom}} <span class=\"close\" @click=\"removePromo(index)\">&times;</span></p> -->\r\n                      </ul>\r\n                    </div>\r\n                    <button class=\"btn btn-outline-dark\" @click=\"onReset\" v-if=\"promotions.length > 0\">Reset</button>\r\n                  </div>\r\n                  <!-- {{items}} -->\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"modal-footer mt-2\">\r\n              <button type=\"button\" class=\"btn btn-outline-info px-5\" @click=\"saveChange\" data-dismiss=\"modal\">\r\n                Envoyer\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\n  import { promotionApi } from \"../../_api/promotion.api\";\r\n  export default {\r\n    name: \"ModalPromotion\",\r\n    props: {\r\n      idName: String,\r\n    },\r\n    data() {\r\n      return {\r\n        currentPage: 0,\r\n        perPage: 5,\r\n        keyword: \"\",\r\n        pageCount: 0,\r\n        items: [],\r\n        promotions: [],\r\n      };\r\n    },\r\n    created() {\r\n      this.fillList();\r\n    },\r\n    methods: {\r\n      fillList() {\r\n        promotionApi\r\n          .getAllByPage(this.currentPage, this.perPage, this.keyword)\r\n          .then((data) => this.items = data);\r\n        this.count();\r\n      },\r\n      count() {\r\n        promotionApi\r\n          .getCount(this.key)\r\n          .then((data) => (this.pageCount = Math.ceil(data / this.perPage)));\r\n      },\r\n      pageChange(page) {\r\n        promotionApi\r\n          .getAllByPage(page, this.perPage, this.key)\r\n          .then((data) => (this.items = data));\r\n      },\r\n      search(evt) {\r\n        evt.preventDefault();\r\n        this.fillList();\r\n        this.count();\r\n      },\r\n      addPromo(promo) {\r\n        // evt.preventDefault();\r\n        if (this.promotions.some(el => el.id == promo.id))\r\n          return ''\r\n        this.promotions.push(promo);\r\n      },\r\n      removePromo(index) {\r\n        this.promotions.splice(index, 1)\r\n      },\r\n      onReset(evt) {\r\n        evt.preventDefault();\r\n        this.promotions = []\r\n      },\r\n      saveChange() {\r\n        this.$emit('input', this.promotions);\r\n        // console.log(\"modal\",this.promotions);\r\n        // $(\"#modal\").modal('hide');\r\n      }\r\n    },\r\n    computed: {\r\n      nbPageComputed() {\r\n        return this.pageCount;\r\n      },\r\n      key: {\r\n        get: function () {\r\n          return this.keyword;\r\n        },\r\n        set: function (keyword) {\r\n          this.keyword = keyword;\r\n        },\r\n      },\r\n    },\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  .input-search {\r\n    outline: none;\r\n  }\r\n\r\n  .btn-search:focus,\r\n  .input-search:focus {\r\n    outline: none;\r\n    outline-offset: 0;\r\n    outline-width: 2px;\r\n    box-shadow: none;\r\n  }\r\n\r\n  .btn-search {\r\n    background-color: rgb(88, 116, 161);\r\n  }\r\n\r\n  .icon {\r\n    color: #fff;\r\n  }\r\n\r\n  .radius {\r\n    border-radius: 0 5px 5px 0;\r\n  }\r\n  \r\n  .info-text {\r\n    color: #2867bc;\r\n  }\r\n\r\n  td:hover {\r\n    background-color: #645e5998;\r\n  }\r\n\r\n  .alert-custom {\r\n    background-color: #0f84ba7a;\r\n  }\r\n\r\n  .close,\r\n  td {\r\n    cursor: pointer;\r\n  }\r\n</style>"]}]}