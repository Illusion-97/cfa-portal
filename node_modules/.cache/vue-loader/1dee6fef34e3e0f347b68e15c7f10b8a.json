{"remainingRequest":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\src\\views\\Etudiant\\EspacePedagogique\\DossierProfessionnel.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\src\\views\\Etudiant\\EspacePedagogique\\DossierProfessionnel.vue","mtime":1634717085162},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1634732405246},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\babel-loader\\lib\\index.js","mtime":1634732404052},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1634732405246},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\vue-loader\\lib\\index.js","mtime":1634732415295}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQm9keVRpdGxlIGZyb20gIkAvY29tcG9uZW50cy91dGlscy9Cb2R5VGl0bGUudnVlIjsNCmltcG9ydCB7IGZpbGVBcGkgfSBmcm9tICJAL19hcGkvZmlsZS5hcGkuanMiDQppbXBvcnQge2Rvc3NpZXJQcm9mZXNzaW9ubmVsQXBpfSBmcm9tICJAL19hcGkvZG9zc2llclByb2Zlc3Npb25uZWwuYXBpLmpzIg0KaW1wb3J0IHtjdXJzdXNBcGl9IGZyb20gIkAvX2FwaS9jdXJzdXMuYXBpLmpzIg0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJEb3NzaWVyUHJvIiwNCiAgY29tcG9uZW50czogew0KICAgIEJvZHlUaXRsZSwNCiAgfSwNCiAgZGF0YSgpew0KICAgIHJldHVybnsNCg0KICAgICAgZmlsZXM6IFtdLA0KICAgICAgZmlsZVRvU2F2ZSA6ICIiLA0KICAgICAgZmlsZTogIiIsDQogICAgICBldHVkaWFudDogIiIsDQogICAgICB1cmw6IiIsDQoNCiAgICAgIGZvcm06ew0KICAgICAgICBub20gOiAiIiwNCiAgICAgICAgY3Vyc3VzRHRvIDoiIg0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpew0KICAgIHRoaXMucmVmcmVzaExpc3QoKTsNCiAgIH0sDQogICBjb21wdXRlZDogew0KICAgIHV0aWxpc2F0ZXVyKCkgew0KICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0VXRpbGlzYXRldXI7DQogICAgICB9LA0KICAgIGZpbGVzX2NvbXB1dGVkKCl7DQogICAgICByZXR1cm4gdGhpcy5maWxlczsNCiAgICB9LA0KICB9LA0KICBtZXRob2RzOnsNCg0KICAgIGhhbmRsZUZpbGVVcGxvYWQoKSB7DQogICAgICB0aGlzLmZpbGVUb1NhdmUgPSB0aGlzLiRyZWZzLmZpbGUuZmlsZXNbMF07DQogICAgfSwNCiAgIA0KICAgIHN1Ym1pdEZpbGUoKXsgICAgDQogICAgICB0aGlzLmZvcm0ubm9tID0gdGhpcy5maWxlVG9TYXZlLm5hbWU7DQogICAgICBmaWxlQXBpLnN1Ym1pdEZpbGVCeURpcmVjdG9yeUFuZElkQW5kRGlyZWN0b3J5KCJ1dGlsaXNhdGV1cnMiLCB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFV0aWxpc2F0ZXVyLmlkLCJEb3NzaWVyUHJvZmVzc2lvbm5lbCIsIHRoaXMuZmlsZVRvU2F2ZSk7DQogICAgICBkb3NzaWVyUHJvZmVzc2lvbm5lbEFwaS5zYXZlKHRoaXMuZm9ybSx0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFV0aWxpc2F0ZXVyLmlkKS50aGVuKCgpPT50aGlzLnJlZnJlc2hMaXN0KCkpOw0KICAgIH0sDQogICAgZG93bmxvYWRfZmlsZShmaWxlTmFtZSkgew0KICAgICAgZmlsZUFwaS5kb3dubG9hZEJ5RGlyZWN0b3J5QW5kSWRBbmREaXJlY3RvcnlBbmRGaWxlbmFtZSgidXRpbGlzYXRldXJzIiwgdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRVdGlsaXNhdGV1ci5pZCwgIkRvc3NpZXJQcm9mZXNzaW9ubmVsIixmaWxlTmFtZSk7DQogICAgfSwNCiAgICBkZWxldGVfZmlsZShmaWxlKSB7DQogICAgICBkb3NzaWVyUHJvZmVzc2lvbm5lbEFwaS5kZWxldGVEb3NzaWVyUHJvZmVzc2lvbm5lbChmaWxlLmlkLHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0VXRpbGlzYXRldXIuaWQpLnRoZW4oKCk9PnRoaXMucmVmcmVzaExpc3QoKSk7DQogICAgICBmaWxlQXBpLmRlbGV0ZUJ5RGlyZWN0b3J5QW5kSWRBbmREaXJlY3RvcnlBbmRGaWxlbmFtZSgidXRpbGlzYXRldXJzIiwgdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRVdGlsaXNhdGV1ci5pZCwiRG9zc2llclByb2Zlc3Npb25uZWwiLCBmaWxlLm5vbSk7DQogICAgfSwNCiAgICAgcmVmcmVzaExpc3QoKSB7DQogICAgY3Vyc3VzQXBpLmdldEN1cnJlbnRDdXJzdXNCeUlkRXR1ZGlhbnQodGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRVdGlsaXNhdGV1ci5pZCkudGhlbihyZXNwb25zZSA9PiB0aGlzLmZvcm0uY3Vyc3VzRHRvID0gcmVzcG9uc2UpDQogICAgZG9zc2llclByb2Zlc3Npb25uZWxBcGkuZ2V0QnlJZEV0dWRpYW50KHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0VXRpbGlzYXRldXIuaWQpLnRoZW4ocmVzcG9uc2UgPT4gdGhpcy5maWxlcyA9IHJlc3BvbnNlKQ0KICAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["DossierProfessionnel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DossierProfessionnel.vue","sourceRoot":"src/views/Etudiant/EspacePedagogique","sourcesContent":["<template>\r\n      <div class=\"body\">\r\n        <BodyTitle title=\"Mon dossier professionel\" />\r\n        <br>\r\n         <div class=\"\">\r\n          <input\r\n            type=\"file\"\r\n            id=\"file\"\r\n            ref=\"file\"\r\n            v-on:change=\"handleFileUpload()\"\r\n            class=\"mr-3\"\r\n            accept=\"application/pdf\"\r\n          />\r\n          <button v-on:click=\"submitFile()\" class=\"btn btn-primary\">Ajouter</button>\r\n        </div>\r\n\r\n        <br>\r\n        <table class=\"table table-striped table-hover text-center\">\r\n          <thead>\r\n            <tr>\r\n              <th>Nom du fichier</th>\r\n              <th>Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody v-if=\"files_computed\">\r\n            <tr v-for=\"file in files_computed\" \r\n                :key=\"file.id\"\r\n                >\r\n              <td>\r\n                {{file.nom}}\r\n              </td>\r\n              <td>\r\n                <button v-on:click=\"download_file(file.nom)\">Télécharger</button>\r\n                <button v-on:click=\"delete_file(file)\">Supprimer</button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n    \r\n    </div>\r\n</template>\r\n<script>\r\nimport BodyTitle from \"@/components/utils/BodyTitle.vue\";\r\nimport { fileApi } from \"@/_api/file.api.js\"\r\nimport {dossierProfessionnelApi} from \"@/_api/dossierProfessionnel.api.js\"\r\nimport {cursusApi} from \"@/_api/cursus.api.js\"\r\n\r\nexport default {\r\n  name: \"DossierPro\",\r\n  components: {\r\n    BodyTitle,\r\n  },\r\n  data(){\r\n    return{\r\n\r\n      files: [],\r\n      fileToSave : \"\",\r\n      file: \"\",\r\n      etudiant: \"\",\r\n      url:\"\",\r\n\r\n      form:{\r\n        nom : \"\",\r\n        cursusDto :\"\"\r\n      }\r\n    }\r\n  },\r\n  created(){\r\n    this.refreshList();\r\n   },\r\n   computed: {\r\n    utilisateur() {\r\n      return this.$store.getters.getUtilisateur;\r\n      },\r\n    files_computed(){\r\n      return this.files;\r\n    },\r\n  },\r\n  methods:{\r\n\r\n    handleFileUpload() {\r\n      this.fileToSave = this.$refs.file.files[0];\r\n    },\r\n   \r\n    submitFile(){    \r\n      this.form.nom = this.fileToSave.name;\r\n      fileApi.submitFileByDirectoryAndIdAndDirectory(\"utilisateurs\", this.$store.getters.getUtilisateur.id,\"DossierProfessionnel\", this.fileToSave);\r\n      dossierProfessionnelApi.save(this.form,this.$store.getters.getUtilisateur.id).then(()=>this.refreshList());\r\n    },\r\n    download_file(fileName) {\r\n      fileApi.downloadByDirectoryAndIdAndDirectoryAndFilename(\"utilisateurs\", this.$store.getters.getUtilisateur.id, \"DossierProfessionnel\",fileName);\r\n    },\r\n    delete_file(file) {\r\n      dossierProfessionnelApi.deleteDossierProfessionnel(file.id,this.$store.getters.getUtilisateur.id).then(()=>this.refreshList());\r\n      fileApi.deleteByDirectoryAndIdAndDirectoryAndFilename(\"utilisateurs\", this.$store.getters.getUtilisateur.id,\"DossierProfessionnel\", file.nom);\r\n    },\r\n     refreshList() {\r\n    cursusApi.getCurrentCursusByIdEtudiant(this.$store.getters.getUtilisateur.id).then(response => this.form.cursusDto = response)\r\n    dossierProfessionnelApi.getByIdEtudiant(this.$store.getters.getUtilisateur.id).then(response => this.files = response)\r\n     }\r\n  }\r\n}\r\n</script>"]}]}