{"remainingRequest":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\src\\_api\\authentication.api.js","dependencies":[{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\src\\_api\\authentication.api.js","mtime":1634720586789},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsgLy9pbXBvcnQgeyByZXF1ZXN0T3B0aW9ucyB9IGZyb20gJ0AvX2hlbHBlcnMvcmVxdWVzdC1vcHRpb25zLmpzJzsKLy9pbXBvcnQgaGFuZGxlUmVzcG9uc2UgZnJvbSAnQC9faGVscGVycy9oYW5kbGUtcmVzcG9uc2UuanMnOwoKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUvc3RvcmUuanMnOwppbXBvcnQgeyB1dGlsaXNhdGV1ckFwaSB9IGZyb20gIkAvX2FwaS91dGlsaXNhdGV1ci5hcGkuanMiOwpleHBvcnQgdmFyIGF1dGhlbnRpY2F0aW9uQXBpID0gewogIGxvZ2luOiBsb2dpbiwKICBsb2dvdXQ6IGxvZ291dAp9OwoKZnVuY3Rpb24gbG9naW4obG9naW4sIHBhc3N3b3JkKSB7CiAgdmFyIHJlcSA9ICJhdXRoZW50aWNhdGUiOyAvLyByZXR1cm4gYXhpb3MKICAvLyAgICAgLnBvc3QocmVxLHtsb2dpbjogbG9naW4sIHBhc3N3b3JkOiBwYXNzd29yZH0pCiAgLy8gICAgIC8vLnRoZW4oaGFuZGxlUmVzcG9uc2UpCiAgLy8gICAgIC50aGVuKChyZXNwb25zZSkgPT4gc3RvcmUuZGlzcGF0Y2goJ2xvZ2luJyxyZXNwb25zZS5kYXRhWyd0b2tlbiddKSkKICAvLyAgICAgLnRoZW4oKCkgPT4gIHV0aWxpc2F0ZXVyQXBpLmdldEJ5TG9naW4obG9naW4pKQogIC8vICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgLy8gICAgICAgICBzdG9yZS5kaXNwYXRjaCgnc2V0VXRpbGlzYXRldXInLCByZXNwb25zZSk7CiAgLy8gICAgICAgICByZXR1cm4gcmVzcG9uc2U7CiAgLy8gICAgIH0pCiAgLy8gICAgIC50aGVuKChyZXNwb25zZSkgPT4gdXRpbGlzYXRldXJBcGkuZ2V0UGxhbm5pbmdCeUlkKHJlc3BvbnNlLmlkKSkKICAvLyAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2V0UGxhbm5pbmcnLCByZXNwb25zZSkpCiAgLy8gICAgIC50aGVuKCgpID0+IGNvbnNvbGUubG9nKCJzZXRQbGFubmluZyBkb25lIikpCiAgLy8gICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAvLyAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogIC8vICAgICAgICAgdGhyb3cgZXJyb3I7CiAgLy8gICAgIH0pOwoKICByZXR1cm4gYXhpb3MucG9zdChyZXEsIHsKICAgIGxvZ2luOiBsb2dpbiwKICAgIHBhc3N3b3JkOiBwYXNzd29yZAogIH0pIC8vLnRoZW4oaGFuZGxlUmVzcG9uc2UpCiAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ2xvZ2luJywgcmVzcG9uc2UuZGF0YVsndG9rZW4nXSk7CiAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdXRpbGlzYXRldXJBcGkuZ2V0QnlMb2dpbihsb2dpbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdzZXRVdGlsaXNhdGV1cicsIHJlc3BvbnNlKTsKICAgIH0pOwogIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgdGhyb3cgZXJyb3I7CiAgfSk7Cn0KCmZ1bmN0aW9uIGxvZ291dCgpIHsKICBzdG9yZS5kaXNwYXRjaCgnbG9nb3V0Jyk7CiAgcmV0dXJuOwp9"},{"version":3,"sources":["C:/Users/Admin stagiaire.DESKTOP-8967908/Desktop/Projet_CFA/AppliCFAFront/cfa-portal/src/_api/authentication.api.js"],"names":["axios","store","utilisateurApi","authenticationApi","login","logout","password","req","post","then","response","dispatch","data","getByLogin","catch","error","console","log"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CACA;AACA;;AACA,OAAOC,KAAP,MAAkB,kBAAlB;AACA,SAASC,cAAT,QAA+B,2BAA/B;AAEA,OAAO,IAAMC,iBAAiB,GAAG;AAC7BC,EAAAA,KAAK,EAALA,KAD6B;AAE7BC,EAAAA,MAAM,EAANA;AAF6B,CAA1B;;AAKP,SAASD,KAAT,CAAeA,KAAf,EAAsBE,QAAtB,EAAgC;AAE5B,MAAIC,GAAG,GAAG,cAAV,CAF4B,CAG5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAOP,KAAK,CACPQ,IADE,CACGD,GADH,EACO;AAACH,IAAAA,KAAK,EAAEA,KAAR;AAAeE,IAAAA,QAAQ,EAAEA;AAAzB,GADP,EAEH;AAFG,GAGFG,IAHE,CAGG,UAACC,QAAD;AAAA,WAAcT,KAAK,CAACU,QAAN,CAAe,OAAf,EAAuBD,QAAQ,CAACE,IAAT,CAAc,OAAd,CAAvB,CAAd;AAAA,GAHH,EAIFH,IAJE,CAIG;AAAA,WAAOP,cAAc,CAACW,UAAf,CAA0BT,KAA1B,EAAiCK,IAAjC,CAAsC,UAAAC,QAAQ;AAAA,aAAIT,KAAK,CAACU,QAAN,CAAe,gBAAf,EAAiCD,QAAjC,CAAJ;AAAA,KAA9C,CAAP;AAAA,GAJH,EAKFI,KALE,CAKI,UAACC,KAAD,EAAW;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,UAAMA,KAAN;AACH,GARE,CAAP;AAUH;;AAED,SAASV,MAAT,GAAkB;AACdJ,EAAAA,KAAK,CAACU,QAAN,CAAe,QAAf;AACA;AACH","sourcesContent":["import axios from 'axios';\r\n//import { requestOptions } from '@/_helpers/request-options.js';\r\n//import handleResponse from '@/_helpers/handle-response.js';\r\nimport store from '@/store/store.js';\r\nimport { utilisateurApi } from \"@/_api/utilisateur.api.js\";\r\n\r\nexport const authenticationApi = {\r\n    login,\r\n    logout,\r\n};\r\n\r\nfunction login(login, password) {\r\n\r\n    let req = \"authenticate\";\r\n    // return axios\r\n    //     .post(req,{login: login, password: password})\r\n    //     //.then(handleResponse)\r\n    //     .then((response) => store.dispatch('login',response.data['token']))\r\n    //     .then(() =>  utilisateurApi.getByLogin(login))\r\n    //     .then(response => {\r\n    //         store.dispatch('setUtilisateur', response);\r\n    //         return response;\r\n    //     })\r\n    //     .then((response) => utilisateurApi.getPlanningById(response.id))\r\n    //     .then((response) => this.$store.dispatch('setPlanning', response))\r\n    //     .then(() => console.log(\"setPlanning done\"))\r\n    //     .catch((error) => {\r\n    //         console.log(error)\r\n    //         throw error;\r\n    //     });\r\n\r\n    return axios\r\n        .post(req,{login: login, password: password})\r\n        //.then(handleResponse)\r\n        .then((response) => store.dispatch('login',response.data['token']))\r\n        .then(() =>  utilisateurApi.getByLogin(login).then(response => store.dispatch('setUtilisateur', response)))\r\n        .catch((error) => {\r\n            console.log(error)\r\n            throw error;\r\n        });\r\n\r\n}\r\n\r\nfunction logout() {\r\n    store.dispatch('logout');\r\n    return\r\n}"]}]}