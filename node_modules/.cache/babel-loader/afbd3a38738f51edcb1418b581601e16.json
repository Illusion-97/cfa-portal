{"remainingRequest":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\src\\views\\Etudiant\\EspaceAdministratif\\DepotFichier.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\src\\views\\Etudiant\\EspaceAdministratif\\DepotFichier.vue","mtime":1634717085246},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1634732405246},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\babel-loader\\lib\\index.js","mtime":1634732404052},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1634732405246},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\vue-loader\\lib\\index.js","mtime":1634732415295}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZmlsZUFwaSB9IGZyb20gIkAvX2FwaS9maWxlLmFwaS5qcyI7CmltcG9ydCBCb2R5VGl0bGUgZnJvbSAiQC9jb21wb25lbnRzL3V0aWxzL0JvZHlUaXRsZS52dWUiOwppbXBvcnQgeyBmaWxlRmllbGRzIH0gZnJvbSAiQC9hc3NldHMvanMvZmllbGRzLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJEZXBvdEZpY2hpZXIiLAogIGNvbXBvbmVudHM6IHsKICAgIEJvZHlUaXRsZTogQm9keVRpdGxlCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZmlsZXM6IFtdLAogICAgICBmaWVsZHM6IGZpbGVGaWVsZHMsCiAgICAgIHBlcl9wYWdlOiAxMCwKICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgIGZpbGU6ICIiCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGl0ZW1zOiBmdW5jdGlvbiBpdGVtcygpIHsKICAgICAgdmFyIHJlc3VsdCA9IFtdOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmZpbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIHRhYmxlID0gewogICAgICAgICAgbmFtZTogIiIsCiAgICAgICAgICBuYW1lX2RsOiAiIiwKICAgICAgICAgIG5hbWVfZGVsZXRlOiAiIgogICAgICAgIH07CiAgICAgICAgdGFibGUubmFtZSA9IHRoaXMuZmlsZXNbaV07CiAgICAgICAgdGFibGUubmFtZV9kbCA9IHRoaXMuZmlsZXNbaV07CiAgICAgICAgdGFibGUubmFtZV9kZWxldGUgPSB0aGlzLmZpbGVzW2ldOwogICAgICAgIHJlc3VsdC5wdXNoKHRhYmxlKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0sCiAgICByb3dzOiBmdW5jdGlvbiByb3dzKCkgewogICAgICByZXR1cm4gdGhpcy5pdGVtcy5sZW5ndGg7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVGaWxlVXBsb2FkOiBmdW5jdGlvbiBoYW5kbGVGaWxlVXBsb2FkKCkgewogICAgICB0aGlzLmZpbGUgPSB0aGlzLiRyZWZzLmZpbGUuZmlsZXNbMF07CiAgICB9LAogICAgc3VibWl0RmlsZTogZnVuY3Rpb24gc3VibWl0RmlsZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGZpbGVBcGkuc3VibWl0RmlsZUJ5RGlyZWN0b3J5QW5kSWQoInV0aWxpc2F0ZXVycyIsIHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0VXRpbGlzYXRldXIuaWQsIHRoaXMuZmlsZSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmxpc3RfcmVzZXQoKTsKICAgICAgfSk7CiAgICB9LAogICAgbGlzdF9yZXNldDogZnVuY3Rpb24gbGlzdF9yZXNldCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBmaWxlQXBpLmdldExpc3RCeURpcmVjdG9yeUFuZElkKCJ1dGlsaXNhdGV1cnMiLCB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFV0aWxpc2F0ZXVyLmlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHJldHVybiBfdGhpczIuZmlsZXMgPSByZXNwb25zZTsKICAgICAgfSk7CiAgICB9LAogICAgZG93bmxvYWRfZmlsZTogZnVuY3Rpb24gZG93bmxvYWRfZmlsZShmaWxlTmFtZSkgewogICAgICBmaWxlQXBpLmRvd25sb2FkQnlEaXJlY3RvcnlBbmRJZEFuZEZpbGVuYW1lKCJ1dGlsaXNhdGV1cnMiLCB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFV0aWxpc2F0ZXVyLmlkLCBmaWxlTmFtZSk7CiAgICB9LAogICAgZGVsZXRlX2ZpbGU6IGZ1bmN0aW9uIGRlbGV0ZV9maWxlKGZpbGVOYW1lKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgZmlsZUFwaS5kZWxldGVCeURpcmVjdG9yeUFuZElkQW5kRmlsZW5hbWUoInV0aWxpc2F0ZXVycyIsIHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0VXRpbGlzYXRldXIuaWQsIGZpbGVOYW1lKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXMzLmxpc3RfcmVzZXQoKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5saXN0X3Jlc2V0KCk7CiAgfQp9Ow=="},{"version":3,"sources":["DepotFichier.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA,SAAA,OAAA,QAAA,oBAAA;AACA,OAAA,SAAA,MAAA,kCAAA;AACA,SAAA,UAAA,QAAA,uBAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,SAAA,EAAA;AADA,GAFA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,MAAA,EAAA,UAFA;AAGA,MAAA,QAAA,EAAA,EAHA;AAIA,MAAA,WAAA,EAAA,CAJA;AAKA,MAAA,IAAA,EAAA;AALA,KAAA;AAOA,GAbA;AAcA,EAAA,QAAA,EAAA;AACA,IAAA,KADA,mBACA;AACA,UAAA,MAAA,GAAA,EAAA;;AAEA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,KAAA,KAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,YAAA,KAAA,GAAA;AAAA,UAAA,IAAA,EAAA,EAAA;AAAA,UAAA,OAAA,EAAA,EAAA;AAAA,UAAA,WAAA,EAAA;AAAA,SAAA;AAEA,QAAA,KAAA,CAAA,IAAA,GAAA,KAAA,KAAA,CAAA,CAAA,CAAA;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,KAAA,KAAA,CAAA,CAAA,CAAA;AACA,QAAA,KAAA,CAAA,WAAA,GAAA,KAAA,KAAA,CAAA,CAAA,CAAA;AAEA,QAAA,MAAA,CAAA,IAAA,CAAA,KAAA;AACA;;AAEA,aAAA,MAAA;AACA,KAfA;AAgBA,IAAA,IAhBA,kBAgBA;AACA,aAAA,KAAA,KAAA,CAAA,MAAA;AACA;AAlBA,GAdA;AAkCA,EAAA,OAAA,EAAA;AACA,IAAA,gBADA,8BACA;AACA,WAAA,IAAA,GAAA,KAAA,KAAA,CAAA,IAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA,KAHA;AAIA,IAAA,UAJA,wBAIA;AAAA;;AACA,MAAA,OAAA,CAAA,0BAAA,CAAA,cAAA,EAAA,KAAA,MAAA,CAAA,OAAA,CAAA,cAAA,CAAA,EAAA,EAAA,KAAA,IAAA,EAAA,IAAA,CAAA;AAAA,eAAA,KAAA,CAAA,UAAA,EAAA;AAAA,OAAA;AACA,KANA;AAOA,IAAA,UAPA,wBAOA;AAAA;;AACA,MAAA,OAAA,CAAA,uBAAA,CAAA,cAAA,EAAA,KAAA,MAAA,CAAA,OAAA,CAAA,cAAA,CAAA,EAAA,EAAA,IAAA,CAAA,UAAA,QAAA;AAAA,eAAA,MAAA,CAAA,KAAA,GAAA,QAAA;AAAA,OAAA;AACA,KATA;AAUA,IAAA,aAVA,yBAUA,QAVA,EAUA;AACA,MAAA,OAAA,CAAA,mCAAA,CAAA,cAAA,EAAA,KAAA,MAAA,CAAA,OAAA,CAAA,cAAA,CAAA,EAAA,EAAA,QAAA;AACA,KAZA;AAaA,IAAA,WAbA,uBAaA,QAbA,EAaA;AAAA;;AACA,MAAA,OAAA,CAAA,iCAAA,CAAA,cAAA,EAAA,KAAA,MAAA,CAAA,OAAA,CAAA,cAAA,CAAA,EAAA,EAAA,QAAA,EAAA,IAAA,CAAA;AAAA,eAAA,MAAA,CAAA,UAAA,EAAA;AAAA,OAAA;AACA;AAfA,GAlCA;AAmDA,EAAA,OAnDA,qBAmDA;AACA,SAAA,UAAA;AACA;AArDA,CAAA","sourcesContent":["<template>\r\n  <div>\r\n    <BodyTitle title=\"Liste des documents administratifs\" />\r\n\r\n    <div class=\"container mt-5\">\r\n      <div class=\"row\">\r\n        <div class=\"\">\r\n          <input\r\n            type=\"file\"\r\n            id=\"file\"\r\n            ref=\"file\"\r\n            v-on:change=\"handleFileUpload()\"\r\n            class=\"mr-3\"\r\n            accept=\"application/pdf\"\r\n          />\r\n          <button v-on:click=\"submitFile()\" class=\"btn btn-primary\">Ajouter</button>\r\n        </div>\r\n        <div class=\"my-3 ml-auto col-md-3\" v-if=\"items.length != 0\">\r\n            <b-form inline>\r\n              <label for=\"pageSelect\" class=\"mr-sm-2\">Affichage :</label>\r\n              <b-form-select id=\"pageSelect\" v-model=\"per_page\" class=\"border-0 opts\" size=\"sm\">\r\n                <b-form-select-option :value=\"Math.floor(items.length * 0.25)\">\r\n                  {{ (items.length * 0.25) | formatNumber }} sur\r\n                  {{ items.length }}\r\n                </b-form-select-option>\r\n                <b-form-select-option :value=\"Math.floor(items.length * 0.5)\">\r\n                  {{ (items.length * 0.5) | formatNumber }} sur\r\n                  {{ items.length }}\r\n                </b-form-select-option>\r\n                <b-form-select-option :value=\"Math.floor(items.length * 0.75)\">\r\n                  {{ (items.length * 0.75) | formatNumber }} sur\r\n                  {{ items.length }}\r\n                </b-form-select-option>\r\n                <b-form-select-option :value=\"items.length\">\r\n                  Tout afficher\r\n                </b-form-select-option>\r\n              </b-form-select>\r\n            </b-form>\r\n          </div>\r\n        <b-table\r\n          id=\"my-table\"\r\n          striped\r\n          small\r\n          :items=\"items\"\r\n          :fields=\"fields\"\r\n          :per-page=\"per_page\"\r\n          :current-page=\"currentPage\"\r\n        >\r\n          <template #cell(name_dl)=\"data\">\r\n            <font-awesome-icon\r\n              :icon=\"['fas', 'arrow-down']\"\r\n              class=\"icon text-success\"\r\n              @click=\"download_file(data.value)\"\r\n            />\r\n          </template>\r\n\r\n          <template #cell(name_delete)=\"data\">\r\n            <font-awesome-icon\r\n              :icon=\"['fas', 'times']\"\r\n              class=\"icon text-danger\"\r\n              @click=\"delete_file(data.value)\"\r\n            />\r\n          </template>\r\n        </b-table>\r\n        <b-pagination\r\n          class=\"pages ml-auto border-0\"\r\n          v-model=\"currentPage\"\r\n          :total-rows=\"rows\"\r\n          :per-page=\"per_page\"\r\n          aria-controls=\"my-table\"\r\n          size=\"sm\"\r\n        >\r\n        </b-pagination>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { fileApi } from \"@/_api/file.api.js\"\r\nimport BodyTitle from \"@/components/utils/BodyTitle.vue\";\r\nimport { fileFields } from \"@/assets/js/fields.js\";\r\nexport default {\r\n  name: \"DepotFichier\",\r\n  components: {\r\n    BodyTitle,\r\n  },\r\n  data() {\r\n    return {\r\n      files: [],\r\n      fields: fileFields,\r\n      per_page: 10,\r\n      currentPage: 1,\r\n      file: \"\",\r\n    };\r\n  },\r\n  computed: {\r\n    items() {\r\n      let result = [];      \r\n      \r\n      for (let i = 0; i < this.files.length; i++) {\r\n        let table = { name: \"\", name_dl: \"\", name_delete: \"\" };\r\n\r\n        table.name = this.files[i];\r\n        table.name_dl = this.files[i];\r\n        table.name_delete = this.files[i];\r\n\r\n        result.push(table);\r\n      }\r\n\r\n      return result;\r\n    },\r\n    rows() {\r\n      return this.items.length;\r\n    },\r\n  },\r\n  methods: {\r\n    handleFileUpload() {\r\n      this.file = this.$refs.file.files[0];\r\n    },\r\n    submitFile() {        \r\n      fileApi.submitFileByDirectoryAndId(\"utilisateurs\", this.$store.getters.getUtilisateur.id, this.file).then(() => this.list_reset());\r\n    },\r\n    list_reset() {\r\n      fileApi.getListByDirectoryAndId(\"utilisateurs\",this.$store.getters.getUtilisateur.id).then((response) => this.files = response);\r\n    },\r\n    download_file(fileName) {\r\n      fileApi.downloadByDirectoryAndIdAndFilename(\"utilisateurs\", this.$store.getters.getUtilisateur.id, fileName);\r\n    },\r\n    delete_file(fileName) {\r\n      fileApi.deleteByDirectoryAndIdAndFilename(\"utilisateurs\", this.$store.getters.getUtilisateur.id, fileName).then(() => this.list_reset());\r\n    },\r\n  },\r\n  created() {\r\n    this.list_reset();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.form {\r\n  border: 1px solid #6c757d;\r\n  margin-top: 5em;\r\n  padding-top: 2em;\r\n  padding-left: 5em;\r\n  padding-right: 5em;\r\n}\r\n\r\n.b-form-textarea {\r\n  height: 200px;\r\n}\r\n\r\n#my-table {\r\n  text-align: center;\r\n}\r\n\r\n.icon:hover{\r\n  cursor: pointer;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/Etudiant/EspaceAdministratif"}]}