{"remainingRequest":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\src\\views\\Etudiant\\EspaceAdministratif\\DemandeConge.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\src\\views\\Etudiant\\EspaceAdministratif\\DemandeConge.vue","mtime":1634717084760},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1634732405246},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\babel-loader\\lib\\index.js","mtime":1634732404052},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1634732405246},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\vue-loader\\lib\\index.js","mtime":1634732415295}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGNvbmdlQXBpIH0gZnJvbSAiQC9fYXBpL2NvbmdlLmFwaS5qcyI7CmltcG9ydCB7IGZpbGVBcGkgfSBmcm9tICJAL19hcGkvZmlsZS5hcGkuanMiOwppbXBvcnQgQm9keVRpdGxlIGZyb20gIkAvY29tcG9uZW50cy91dGlscy9Cb2R5VGl0bGUudnVlIjsKaW1wb3J0IFRhYmxlVGVtcGxhdGUgZnJvbSAiQC9jb21wb25lbnRzL3V0aWxzL1RhYmxlVGVtcGxhdGUudnVlIjsKaW1wb3J0IHsgbGVhdmVGaWVsZHMgfSBmcm9tICJAL2Fzc2V0cy9qcy9maWVsZHMuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkRlbWFuZGVDb25nZSIsCiAgY29tcG9uZW50czogewogICAgQm9keVRpdGxlOiBCb2R5VGl0bGUsCiAgICBUYWJsZVRlbXBsYXRlOiBUYWJsZVRlbXBsYXRlCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZmlsZTogIiIsCiAgICAgIGZvcm06IHsKICAgICAgICBkYXRlRGVidXQ6ICIiLAogICAgICAgIGRhdGVGaW46ICIiLAogICAgICAgIG1vdGlmOiAiIiwKICAgICAgICB0eXBlOiAiIiwKICAgICAgICBzdGF0dXM6ICJFTl9BVFRFTlRFIiwKICAgICAgICB1dGlsaXNhdGV1ckR0bzogdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRVdGlsaXNhdGV1ciwKICAgICAgICBqdXN0aWZpY2F0aWY6ICIiCiAgICAgIH0sCiAgICAgIHR5cGVzOiBbewogICAgICAgIHRleHQ6ICJNYWxhZGllIiwKICAgICAgICB2YWx1ZTogIk1BTEFESUUiCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAiUGF5w6kiLAogICAgICAgIHZhbHVlOiAiUEFZRSIKICAgICAgfSwgewogICAgICAgIHRleHQ6ICJTYW5zIHNvbGRlIiwKICAgICAgICB2YWx1ZTogIlNBTlNfU09MREUiCiAgICAgIH1dLAogICAgICBjb25nZXM6IFtdLAogICAgICBmaWVsZHM6IGxlYXZlRmllbGRzLAogICAgICBwZXJQYWdlOiAxMCwKICAgICAgdGFibGVDb25nZTogW10KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgdXRpbGlzYXRldXI6IGZ1bmN0aW9uIHV0aWxpc2F0ZXVyKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRVdGlsaXNhdGV1cjsKICAgIH0sCiAgICBjb25nZXNDb21wdXRlZDogZnVuY3Rpb24gY29uZ2VzQ29tcHV0ZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbmdlczsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIGNvbmdlQXBpLmdldENvbmdlc0J5VXRpbGlzYXRldXJJZCh0aGlzLnV0aWxpc2F0ZXVyLmlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICByZXR1cm4gX3RoaXMuY29uZ2VzID0gcmVzcG9uc2U7CiAgICB9KTsKICAgIGNvbmdlQXBpLmdldFRhYmxlQ29uZ2UodGhpcy51dGlsaXNhdGV1ci5pZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgcmV0dXJuIF90aGlzLnRhYmxlQ29uZ2UgPSByZXNwb25zZTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlRmlsZVVwbG9hZDogZnVuY3Rpb24gaGFuZGxlRmlsZVVwbG9hZCgpIHsKICAgICAgdGhpcy5maWxlID0gdGhpcy4kcmVmcy5maWxlLmZpbGVzWzBdOwogICAgfSwKICAgIHN1Ym1pdDogZnVuY3Rpb24gc3VibWl0KGUpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHRoaXMuZm9ybS5qdXN0aWZpY2F0aWYgPSB0aGlzLmZpbGUubmFtZTsgLy9UT0RPIDogc2F2ZSBkdSBmaWxlCgogICAgICBjb25nZUFwaS5zYXZlKHRoaXMuZm9ybSkgLy9RdWFuZCBvbiBhIGFqb3V0w6kgbGUgY29uZ8OpLCBvbiByZWNoYXJnZSBsYSBsaXN0ZQogICAgICAudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGNvbmdlQXBpLmdldENvbmdlc0J5VXRpbGlzYXRldXJJZChfdGhpczIudXRpbGlzYXRldXIuaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMyLmNvbmdlcyA9IHJlc3BvbnNlOwogICAgICAgIH0pIC8vU2kgcGFzIGQnZXJyZXVyLCBvbiBwb3N0IGxlIGZpY2hpZXIKICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoX3RoaXMyLmZpbGUgIT0gIiIpIGZpbGVBcGkuc3VibWl0RmlsZUJ5RGlyZWN0b3J5QW5kSWQoInV0aWxpc2F0ZXVycyIsIF90aGlzMi4kc3RvcmUuZ2V0dGVycy5nZXRVdGlsaXNhdGV1ci5pZCwgX3RoaXMyLmZpbGUpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["DemandeConge.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA,SAAA,QAAA,QAAA,qBAAA;AACA,SAAA,OAAA,QAAA,oBAAA;AACA,OAAA,SAAA,MAAA,kCAAA;AACA,OAAA,aAAA,MAAA,sCAAA;AACA,SAAA,WAAA,QAAA,uBAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,SAAA,EAAA,SADA;AAEA,IAAA,aAAA,EAAA;AAFA,GAFA;AAMA,EAAA,IANA,kBAMA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA;AACA,QAAA,SAAA,EAAA,EADA;AAEA,QAAA,OAAA,EAAA,EAFA;AAGA,QAAA,KAAA,EAAA,EAHA;AAIA,QAAA,IAAA,EAAA,EAJA;AAKA,QAAA,MAAA,EAAA,YALA;AAMA,QAAA,cAAA,EAAA,KAAA,MAAA,CAAA,OAAA,CAAA,cANA;AAOA,QAAA,YAAA,EAAA;AAPA,OAFA;AAYA,MAAA,KAAA,EAAA,CAAA;AACA,QAAA,IAAA,EAAA,SADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAAA,EAIA;AACA,QAAA,IAAA,EAAA,MADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAJA,EAQA;AACA,QAAA,IAAA,EAAA,YADA;AAEA,QAAA,KAAA,EAAA;AAFA,OARA,CAZA;AA0BA,MAAA,MAAA,EAAA,EA1BA;AA2BA,MAAA,MAAA,EAAA,WA3BA;AA4BA,MAAA,OAAA,EAAA,EA5BA;AA8BA,MAAA,UAAA,EAAA;AA9BA,KAAA;AAgCA,GAvCA;AAwCA,EAAA,QAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA,aAAA,KAAA,MAAA,CAAA,OAAA,CAAA,cAAA;AACA,KAHA;AAIA,IAAA,cAJA,4BAIA;AACA,aAAA,KAAA,MAAA;AACA;AANA,GAxCA;AAgDA,EAAA,OAhDA,qBAgDA;AAAA;;AACA,IAAA,QAAA,CACA,wBADA,CACA,KAAA,WAAA,CAAA,EADA,EAEA,IAFA,CAEA,UAAA,QAAA;AAAA,aAAA,KAAA,CAAA,MAAA,GAAA,QAAA;AAAA,KAFA;AAGA,IAAA,QAAA,CACA,aADA,CACA,KAAA,WAAA,CAAA,EADA,EAEA,IAFA,CAEA,UAAA,QAAA;AAAA,aAAA,KAAA,CAAA,UAAA,GAAA,QAAA;AAAA,KAFA;AAGA,GAvDA;AAwDA,EAAA,OAAA,EAAA;AACA,IAAA,gBADA,8BACA;AACA,WAAA,IAAA,GAAA,KAAA,KAAA,CAAA,IAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA,KAHA;AAIA,IAAA,MAJA,kBAIA,CAJA,EAIA;AAAA;;AACA,MAAA,CAAA,CAAA,cAAA;AAEA,WAAA,IAAA,CAAA,YAAA,GAAA,KAAA,IAAA,CAAA,IAAA,CAHA,CAKA;;AAEA,MAAA,QAAA,CACA,IADA,CACA,KAAA,IADA,EAEA;AAFA,OAGA,IAHA,CAGA;AAAA,eACA,QAAA,CACA,wBADA,CACA,MAAA,CAAA,WAAA,CAAA,EADA,EAEA,IAFA,CAEA,UAAA,QAAA;AAAA,iBAAA,MAAA,CAAA,MAAA,GAAA,QAAA;AAAA,SAFA,EAGA;AAHA,SAIA,IAJA,CAIA,YAAA;AACA,cAAA,MAAA,CAAA,IAAA,IAAA,EAAA,EACA,OAAA,CAAA,0BAAA,CACA,cADA,EAEA,MAAA,CAAA,MAAA,CAAA,OAAA,CAAA,cAAA,CAAA,EAFA,EAGA,MAAA,CAAA,IAHA;AAKA,SAXA,CADA;AAAA,OAHA;AAiBA;AA5BA;AAxDA,CAAA","sourcesContent":["<template>\r\n  <div class=\"container-fluid\">\r\n    <BodyTitle title=\"Demande de congé\" />\r\n\r\n    <table class=\"table text-center mt-5\" style=\"table-layout:fixed\">\r\n      <thead>\r\n        <tr>\r\n          <th>Acquis</th>\r\n          <th>Pris</th>\r\n          <th>Disponibles</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <td>{{ tableConge[0] | twoDigits }}</td>\r\n        <td>{{ tableConge[1] | twoDigits }}</td>\r\n        <td>{{ tableConge[2] | twoDigits }}</td>\r\n      </tbody>\r\n    </table>\r\n\r\n    <form class=\"mb-5\" @submit=\"submit\">\r\n      <div class=\"d-flex justify-content-center form-group\">\r\n        <div class=\"col-4\">\r\n          <label for=\"\">Date de debut</label>\r\n          <b-form-datepicker locale=\"fr\" v-model=\"form.dateDebut\" placeholder=\"Aucune date selectionné\" required>\r\n          </b-form-datepicker>\r\n        </div>\r\n        <div class=\"col-4\">\r\n          <label for=\"\">Date de fin</label>\r\n          <b-form-datepicker locale=\"fr\" v-model=\"form.dateFin\" placeholder=\"Aucune date selectionné\" required>\r\n          </b-form-datepicker>\r\n        </div>\r\n      </div>\r\n      <div class=\"d-flex justify-content-center form-group\">\r\n        <div class=\"col-4\">\r\n          <select name=\"\" id=\"\" class=\"custom-select\" v-model=\"form.type\">\r\n            <option value=\"\" disabled>Type de congé</option>\r\n            <option :value=\"type.value\" v-for=\"type in types\" :key=\"type.id\">\r\n              {{ type.text }}\r\n            </option>\r\n          </select>\r\n        </div>\r\n        <div class=\"col-4\">\r\n          <label for=\"file\" class=\"mr-2\">Justificatif :</label>\r\n          <input\r\n            type=\"file\"\r\n            id=\"file\"\r\n            ref=\"file\"\r\n            v-on:change=\"handleFileUpload()\"\r\n            accept=\"application/pdf\"\r\n          />\r\n   \r\n          </div>\r\n      </div>\r\n      \r\n      <div class=\"d-flex justify-content-center form-group\">\r\n        <div class=\"col-8\">\r\n        <textarea name=\"motif\" cols=\"20\" rows=\"3\" class=\"form-control\" v-model=\"form.motif\" placeholder=\"Motif du congé\"/>\r\n        </div>\r\n      </div>\r\n      <input type=\"submit\" value=\"Envoyer\" class=\"btn btn-outline-primary px-5 float-right\">\r\n    </form>\r\n    <!-- {{conges}} -->\r\n    <!-- <pre class=\"m-0\">\r\n      {{form}}\r\n    </pre> -->\r\n    <TableTemplate :perPage=\"perPage\" :items=\"congesComputed\" :fields=\"fields\" :isPaginate=\"false\" :current-page=\"0\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {  congeApi } from \"@/_api/conge.api.js\";\r\n  import { fileApi } from \"@/_api/file.api.js\";\r\n  import BodyTitle from \"@/components/utils/BodyTitle.vue\";\r\n  import TableTemplate from \"@/components/utils/TableTemplate.vue\";\r\n  import { leaveFields } from \"@/assets/js/fields.js\";\r\n  export default {\r\n    name: \"DemandeConge\",\r\n    components: {\r\n      BodyTitle,\r\n      TableTemplate,\r\n    },\r\n    data() {\r\n      return {\r\n        file: \"\",\r\n        form: {\r\n          dateDebut: \"\",\r\n          dateFin: \"\",\r\n          motif: \"\",\r\n          type: \"\",\r\n          status: \"EN_ATTENTE\",\r\n          utilisateurDto: this.$store.getters.getUtilisateur,\r\n          justificatif: \"\",\r\n        },\r\n\r\n        types: [{\r\n            text: \"Maladie\",\r\n            value: \"MALADIE\"\r\n          },\r\n          {\r\n            text: \"Payé\",\r\n            value: \"PAYE\"\r\n          },\r\n          {\r\n            text: \"Sans solde\",\r\n            value: \"SANS_SOLDE\"\r\n          },\r\n        ],\r\n\r\n        conges: [],\r\n        fields: leaveFields,\r\n        perPage: 10,\r\n\r\n        tableConge: [],\r\n      };\r\n    },\r\n    computed: {\r\n      utilisateur() {\r\n        return this.$store.getters.getUtilisateur;\r\n      },\r\n      congesComputed() {\r\n        return this.conges;\r\n      },\r\n    },\r\n    created() {\r\n      congeApi\r\n        .getCongesByUtilisateurId(this.utilisateur.id)\r\n        .then((response) => (this.conges = response));\r\n      congeApi\r\n        .getTableConge(this.utilisateur.id)\r\n        .then((response) => (this.tableConge = response));\r\n    },\r\n    methods: {\r\n      handleFileUpload() {\r\n        this.file = this.$refs.file.files[0];\r\n      },\r\n      submit(e) {\r\n        e.preventDefault();\r\n\r\n        this.form.justificatif = this.file.name;\r\n\r\n        //TODO : save du file\r\n\r\n        congeApi\r\n          .save(this.form)\r\n          //Quand on a ajouté le congé, on recharge la liste\r\n          .then(() =>\r\n            congeApi\r\n            .getCongesByUtilisateurId(this.utilisateur.id)\r\n            .then((response) => (this.conges = response))\r\n            //Si pas d'erreur, on post le fichier\r\n            .then(() => {\r\n              if (this.file != \"\")\r\n                fileApi.submitFileByDirectoryAndId(\r\n                  \"utilisateurs\",\r\n                  this.$store.getters.getUtilisateur.id,\r\n                  this.file\r\n                );\r\n            })\r\n          );\r\n      },\r\n    },\r\n  };\r\n</script>\r\n"],"sourceRoot":"src/views/Etudiant/EspaceAdministratif"}]}