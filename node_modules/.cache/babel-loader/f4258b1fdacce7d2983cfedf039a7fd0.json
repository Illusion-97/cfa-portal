{"remainingRequest":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\src\\components\\Modal\\ModalPromo.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\src\\components\\Modal\\ModalPromo.vue","mtime":1634717085998},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1634732405246},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\babel-loader\\lib\\index.js","mtime":1634732404052},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1634732405246},{"path":"C:\\Users\\Admin stagiaire.DESKTOP-8967908\\Desktop\\Projet_CFA\\AppliCFAFront\\cfa-portal\\node_modules\\vue-loader\\lib\\index.js","mtime":1634732415295}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgcHJvbW90aW9uQXBpIH0gZnJvbSAiLi4vLi4vX2FwaS9wcm9tb3Rpb24uYXBpIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJNb2RhbFByb21vdGlvbiIsCiAgcHJvcHM6IHsKICAgIGlkTmFtZTogU3RyaW5nCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY3VycmVudFBhZ2U6IDAsCiAgICAgIHBlclBhZ2U6IDUsCiAgICAgIGtleXdvcmQ6ICIiLAogICAgICBwYWdlQ291bnQ6IDAsCiAgICAgIGl0ZW1zOiBbXSwKICAgICAgcHJvbW90aW9uczogW10KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5maWxsTGlzdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgZmlsbExpc3Q6IGZ1bmN0aW9uIGZpbGxMaXN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcHJvbW90aW9uQXBpLmdldEFsbEJ5UGFnZSh0aGlzLmN1cnJlbnRQYWdlLCB0aGlzLnBlclBhZ2UsIHRoaXMua2V5d29yZCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpcy5pdGVtcyA9IGRhdGE7CiAgICAgIH0pOwogICAgICB0aGlzLmNvdW50KCk7CiAgICB9LAogICAgY291bnQ6IGZ1bmN0aW9uIGNvdW50KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHByb21vdGlvbkFwaS5nZXRDb3VudCh0aGlzLmtleSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczIucGFnZUNvdW50ID0gTWF0aC5jZWlsKGRhdGEgLyBfdGhpczIucGVyUGFnZSk7CiAgICAgIH0pOwogICAgfSwKICAgIHBhZ2VDaGFuZ2U6IGZ1bmN0aW9uIHBhZ2VDaGFuZ2UocGFnZSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHByb21vdGlvbkFwaS5nZXRBbGxCeVBhZ2UocGFnZSwgdGhpcy5wZXJQYWdlLCB0aGlzLmtleSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczMuaXRlbXMgPSBkYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBzZWFyY2g6IGZ1bmN0aW9uIHNlYXJjaChldnQpIHsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHRoaXMuZmlsbExpc3QoKTsKICAgICAgdGhpcy5jb3VudCgpOwogICAgfSwKICAgIGFkZFByb21vOiBmdW5jdGlvbiBhZGRQcm9tbyhwcm9tbykgewogICAgICAvLyBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgaWYgKHRoaXMucHJvbW90aW9ucy5zb21lKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5pZCA9PSBwcm9tby5pZDsKICAgICAgfSkpIHJldHVybiAnJzsKICAgICAgdGhpcy5wcm9tb3Rpb25zLnB1c2gocHJvbW8pOwogICAgfSwKICAgIHJlbW92ZVByb21vOiBmdW5jdGlvbiByZW1vdmVQcm9tbyhpbmRleCkgewogICAgICB0aGlzLnByb21vdGlvbnMuc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCiAgICBvblJlc2V0OiBmdW5jdGlvbiBvblJlc2V0KGV2dCkgewogICAgICBldnQucHJldmVudERlZmF1bHQoKTsKICAgICAgdGhpcy5wcm9tb3Rpb25zID0gW107CiAgICB9LAogICAgc2F2ZUNoYW5nZTogZnVuY3Rpb24gc2F2ZUNoYW5nZSgpIHsKICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB0aGlzLnByb21vdGlvbnMpOyAvLyBjb25zb2xlLmxvZygibW9kYWwiLHRoaXMucHJvbW90aW9ucyk7CiAgICAgIC8vICQoIiNtb2RhbCIpLm1vZGFsKCdoaWRlJyk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgbmJQYWdlQ29tcHV0ZWQ6IGZ1bmN0aW9uIG5iUGFnZUNvbXB1dGVkKCkgewogICAgICByZXR1cm4gdGhpcy5wYWdlQ291bnQ7CiAgICB9LAogICAga2V5OiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHJldHVybiB0aGlzLmtleXdvcmQ7CiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gc2V0KGtleXdvcmQpIHsKICAgICAgICB0aGlzLmtleXdvcmQgPSBrZXl3b3JkOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["ModalPromo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA,SAAA,YAAA,QAAA,0BAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,gBADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,MAAA,EAAA;AADA,GAFA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,CADA;AAEA,MAAA,OAAA,EAAA,CAFA;AAGA,MAAA,OAAA,EAAA,EAHA;AAIA,MAAA,SAAA,EAAA,CAJA;AAKA,MAAA,KAAA,EAAA,EALA;AAMA,MAAA,UAAA,EAAA;AANA,KAAA;AAQA,GAdA;AAeA,EAAA,OAfA,qBAeA;AACA,SAAA,QAAA;AACA,GAjBA;AAkBA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AAAA;;AACA,MAAA,YAAA,CACA,YADA,CACA,KAAA,WADA,EACA,KAAA,OADA,EACA,KAAA,OADA,EAEA,IAFA,CAEA,UAAA,IAAA;AAAA,eAAA,KAAA,CAAA,KAAA,GAAA,IAAA;AAAA,OAFA;AAGA,WAAA,KAAA;AACA,KANA;AAOA,IAAA,KAPA,mBAOA;AAAA;;AACA,MAAA,YAAA,CACA,QADA,CACA,KAAA,GADA,EAEA,IAFA,CAEA,UAAA,IAAA;AAAA,eAAA,MAAA,CAAA,SAAA,GAAA,IAAA,CAAA,IAAA,CAAA,IAAA,GAAA,MAAA,CAAA,OAAA,CAAA;AAAA,OAFA;AAGA,KAXA;AAYA,IAAA,UAZA,sBAYA,IAZA,EAYA;AAAA;;AACA,MAAA,YAAA,CACA,YADA,CACA,IADA,EACA,KAAA,OADA,EACA,KAAA,GADA,EAEA,IAFA,CAEA,UAAA,IAAA;AAAA,eAAA,MAAA,CAAA,KAAA,GAAA,IAAA;AAAA,OAFA;AAGA,KAhBA;AAiBA,IAAA,MAjBA,kBAiBA,GAjBA,EAiBA;AACA,MAAA,GAAA,CAAA,cAAA;AACA,WAAA,QAAA;AACA,WAAA,KAAA;AACA,KArBA;AAsBA,IAAA,QAtBA,oBAsBA,KAtBA,EAsBA;AACA;AACA,UAAA,KAAA,UAAA,CAAA,IAAA,CAAA,UAAA,EAAA;AAAA,eAAA,EAAA,CAAA,EAAA,IAAA,KAAA,CAAA,EAAA;AAAA,OAAA,CAAA,EACA,OAAA,EAAA;AACA,WAAA,UAAA,CAAA,IAAA,CAAA,KAAA;AACA,KA3BA;AA4BA,IAAA,WA5BA,uBA4BA,KA5BA,EA4BA;AACA,WAAA,UAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA;AACA,KA9BA;AA+BA,IAAA,OA/BA,mBA+BA,GA/BA,EA+BA;AACA,MAAA,GAAA,CAAA,cAAA;AACA,WAAA,UAAA,GAAA,EAAA;AACA,KAlCA;AAmCA,IAAA,UAnCA,wBAmCA;AACA,WAAA,KAAA,CAAA,OAAA,EAAA,KAAA,UAAA,EADA,CAEA;AACA;AACA;AAvCA,GAlBA;AA2DA,EAAA,QAAA,EAAA;AACA,IAAA,cADA,4BACA;AACA,aAAA,KAAA,SAAA;AACA,KAHA;AAIA,IAAA,GAAA,EAAA;AACA,MAAA,GAAA,EAAA,eAAA;AACA,eAAA,KAAA,OAAA;AACA,OAHA;AAIA,MAAA,GAAA,EAAA,aAAA,OAAA,EAAA;AACA,aAAA,OAAA,GAAA,OAAA;AACA;AANA;AAJA;AA3DA,CAAA","sourcesContent":["<template>\r\n  <section>\r\n    <!-- Modal -->\r\n    <div class=\"modal fade custom-modal\" :id=\"idName\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\"\r\n      aria-hidden=\"true\">\r\n      <div class=\"modal-dialog modal-xl\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"exampleModalLabel\">Ajouter des promotions</h5>\r\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <div class=\"container-fluid\">\r\n              <div class=\"row-fluid\">\r\n                <form action=\"\" class=\"d-flex\" @submit=\"search\">\r\n                  <input type=\"search\" name=\"search\" id=\"searchCursus\" v-model=\"key\"\r\n                    class=\"form-control rounded-0 input-search\" placeholder=\"Rechercher...\" />\r\n                  <button type=\"submit\" class=\"btn radius px-4 btn-search\">\r\n                    <font-awesome-icon :icon=\"['fas', 'search']\" class=\"icon\" />\r\n                  </button>\r\n                </form>\r\n              </div>\r\n              <div class=\"row mt-3\">\r\n                <div class=\"col-md-6\">\r\n                  <small class=\"form-text info-text\">\r\n                    <font-awesome-icon :icon=\"['fas', 'info-circle']\" />\r\n                    Selectionnez une ou plusieurs promotions.</small>\r\n                  <table class=\"table text-center\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th scope=\"col\">Nom de la promotion</th>\r\n                        <!-- <th scope=\"col\">Formations</th> -->\r\n                        <!-- <th scope=\"col\">Handle</th> -->\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      <tr v-for=\"promo in items\" :key=\"promo.id\">\r\n                        <td @click.prevent=\"addPromo(promo)\">\r\n                          <span> {{ promo.nom }}</span>\r\n                        </td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n\r\n                  <paginate :page-count=\"nbPageComputed\" :page-range=\"1\" :margin-pages=\"2\" :click-handler=\"pageChange\"\r\n                    :prev-text=\"'Prev'\" :next-text=\"'Next'\" :container-class=\"'pagination d-flex justify-content-end'\"\r\n                    :page-class=\"'page-item'\" :page-link-class=\"'page-link'\" :prev-class=\"'page-item'\"\r\n                    :next-class=\"'page-item'\" :prev-link-class=\"'page-link'\" :next-link-class=\"'page-link'\"\r\n                    :active-class=\"'active'\">\r\n                    >\r\n                  </paginate>\r\n                </div>\r\n                <div class=\"col-md-6\">\r\n                  <div class=\"card h-100 p-2\">\r\n                    <div class=\"card-header\">\r\n                      <h6 class=\"text-center\">Promotions selectionn√©e</h6>\r\n                    </div>\r\n                    <div class=\"card-body\">\r\n                      <ul>\r\n                        <div class=\"alert alert-custom\" v-for=\"(p,index) in promotions\" :key=\"p.id\">\r\n                          <span class=\"close\" @click.prevent=\"removePromo(index)\">&times;</span>\r\n                            {{p.nom}}\r\n                        </div>\r\n                        <!-- <p class=\"alert alert-primary\">{{p.nom}} <span class=\"close\" @click=\"removePromo(index)\">&times;</span></p> -->\r\n                      </ul>\r\n                    </div>\r\n                    <button class=\"btn btn-outline-dark\" @click=\"onReset\" v-if=\"promotions.length > 0\">Reset</button>\r\n                  </div>\r\n                  <!-- {{items}} -->\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"modal-footer mt-2\">\r\n              <button type=\"button\" class=\"btn btn-outline-info px-5\" @click=\"saveChange\" data-dismiss=\"modal\">\r\n                Envoyer\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\n  import { promotionApi } from \"../../_api/promotion.api\";\r\n  export default {\r\n    name: \"ModalPromotion\",\r\n    props: {\r\n      idName: String,\r\n    },\r\n    data() {\r\n      return {\r\n        currentPage: 0,\r\n        perPage: 5,\r\n        keyword: \"\",\r\n        pageCount: 0,\r\n        items: [],\r\n        promotions: [],\r\n      };\r\n    },\r\n    created() {\r\n      this.fillList();\r\n    },\r\n    methods: {\r\n      fillList() {\r\n        promotionApi\r\n          .getAllByPage(this.currentPage, this.perPage, this.keyword)\r\n          .then((data) => this.items = data);\r\n        this.count();\r\n      },\r\n      count() {\r\n        promotionApi\r\n          .getCount(this.key)\r\n          .then((data) => (this.pageCount = Math.ceil(data / this.perPage)));\r\n      },\r\n      pageChange(page) {\r\n        promotionApi\r\n          .getAllByPage(page, this.perPage, this.key)\r\n          .then((data) => (this.items = data));\r\n      },\r\n      search(evt) {\r\n        evt.preventDefault();\r\n        this.fillList();\r\n        this.count();\r\n      },\r\n      addPromo(promo) {\r\n        // evt.preventDefault();\r\n        if (this.promotions.some(el => el.id == promo.id))\r\n          return ''\r\n        this.promotions.push(promo);\r\n      },\r\n      removePromo(index) {\r\n        this.promotions.splice(index, 1)\r\n      },\r\n      onReset(evt) {\r\n        evt.preventDefault();\r\n        this.promotions = []\r\n      },\r\n      saveChange() {\r\n        this.$emit('input', this.promotions);\r\n        // console.log(\"modal\",this.promotions);\r\n        // $(\"#modal\").modal('hide');\r\n      }\r\n    },\r\n    computed: {\r\n      nbPageComputed() {\r\n        return this.pageCount;\r\n      },\r\n      key: {\r\n        get: function () {\r\n          return this.keyword;\r\n        },\r\n        set: function (keyword) {\r\n          this.keyword = keyword;\r\n        },\r\n      },\r\n    },\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  .input-search {\r\n    outline: none;\r\n  }\r\n\r\n  .btn-search:focus,\r\n  .input-search:focus {\r\n    outline: none;\r\n    outline-offset: 0;\r\n    outline-width: 2px;\r\n    box-shadow: none;\r\n  }\r\n\r\n  .btn-search {\r\n    background-color: rgb(88, 116, 161);\r\n  }\r\n\r\n  .icon {\r\n    color: #fff;\r\n  }\r\n\r\n  .radius {\r\n    border-radius: 0 5px 5px 0;\r\n  }\r\n  \r\n  .info-text {\r\n    color: #2867bc;\r\n  }\r\n\r\n  td:hover {\r\n    background-color: #645e5998;\r\n  }\r\n\r\n  .alert-custom {\r\n    background-color: #0f84ba7a;\r\n  }\r\n\r\n  .close,\r\n  td {\r\n    cursor: pointer;\r\n  }\r\n</style>"],"sourceRoot":"src/components/Modal"}]}